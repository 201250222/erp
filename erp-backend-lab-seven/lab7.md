# lab7文档

[TOC]



## erp系统用例文档

| 版本号 | 内容                           |
| ------ | ------------------------------ |
| v0.1   | 创建文档，加入了id为1~10的用例 |
| v0.2   | 添加后续5个用例                |
| v1.0   | 加入了文件目录、作者           |



### 1.引言
### 2.用例列表
| 参与者           | 用例                                 |
|---------------|------------------------------------|
| 人力资源人员        | 1.员工管理 <br> 2.员工打卡 <br> 3.薪酬规则制定 |
| 财务人员, ADMIN账户 | 1.账户管理 <br>2.余额变动                |
| 财务人员,总经理      | 1.制定收款单 <br>2.审批收款单              |
| ADMIN账户, 财务人员 | 1.期初建账                             |
| 财务人员，总经理      | 1.查看经营历程表<br>2.红冲                |
| 总经理, ADMIN账户, 财务人员 | 1.制定付款单 |
| 总经理, ADMIN账户, 财务人员 | 1.查看销售明细表 |
| 总经理, ADMIN账户 | 1.制定年终奖 |
| 财务人员、总经理 | 查看经营情况表 |
| 财务人员 | 制定工资单 |
| 总经理 | 制定促销策略 |
### 3.详细用例描述
| **id**      | 1                                                                                      |
|-------------|----------------------------------------------------------------------------------------|
| **名称**      | 员工管理                                                                                   |
| **创建者**     | 张翼                                                                                     |  
| **最后一次更新者** | 于金甲                                                                                     |
| **创建日期**    | 2022.6.26                                                                              |  
| **最后更新日期**  | 2022.6.27                                                                              |
| **参与者**     | 人力资源人员                                                                                 |
| **触发条件**    | 新员工入职或老员工信息发生变更                                                                        |
| **前置条件**    | 人力资源人员身份已经被识别                                                                          |
| **优先级**     | 高                                                                                      |
| **正常流程**    | 1.如果是新员工入职，在员工管理页面点击添加员工</br> 2.输入员工信息，点击确认。 </br> 3.系统返回创建是否成功，如果创建成功，会为该员工提供账号 </br> |
| **扩展流程**    | 1a.输入非法员工信息 </br> 2.系统提示错误并拒绝操作                                                        |
| **特殊需求**    ||

|   **id**    |            2             |
|:-----------:|:------------------------:|
|   **名称**    |           员工打卡           |
|   **创建者**   |            张翼            |
| **最后一次更新者** |            于金甲            |
|  **创建日期**   |        2022.6.26         |
| **最后更新日期**  |        2022.6.27         |
|   **参与者**   |           所有员工           |
|  **触发条件**   |           员工打卡           |
|  **前置条件**   |        员工身份已经被识别         |
|   **优先级**   |            高             |
|  **正常流程**   | 1.点击打卡按钮<br> 2.系统返回操作结果 |
|  **扩展流程**   |                          |
|  **特殊需求**   ||

| **id**             | 3                                                            |
| ------------------ | ------------------------------------------------------------ |
| **名称**           | 员工薪酬规则制定                                             |
| **创建者**         | 张翼                                                         |
| **最后一次更新者** | 张翼                                                         |
| **创建日期**       | 2022.6.26                                                    |
| **最后更新日期**   | 2022.6.27                                                    |
| **参与者**         | 人力资源人员                                                 |
| **触发条件**       | 制定员工薪酬                                                 |
| **前置条件**       | 人力资源人员身份已经被识别                                   |
| **优先级**         | 高                                                           |
| **正常流程**       | 1.在员工薪酬管理列表中寻找对应员工<br> 2.点击该员工的管理按钮 <br> 3.修改员工薪酬信息 |
| **扩展流程**       |                                                              |
| **特殊需求**       | 1a.输入非法薪资信息 <br> 2.系统提示错误并拒绝操作            |

| **id**             | 4                                                            |
| ------------------ | ------------------------------------------------------------ |
| **名称**           | 账户管理                                                     |
| **创建者**         | 刘昕宇                                                       |
| **最后一次更新者** | 刘昕宇                                                       |
| **创建日期**       | 2022.6.28                                                    |
| **最后更新日期**   | 2022.6.28                                                    |
| **参与者**         | ADMIN账户                                                    |
| **触发条件**       | 公司新建立账户或舍弃老账户或需要对余额进行查询时             |
| **前置条件**       | 确认为ADMIN账户                                              |
| **优先级**         | 高                                                           |
| **正常流程**       | 1.如果是新设立账户，在账户管理页面点击添加账户<br>2.输入账户信息，点击确认。<br>3.系统返回创建是否成功 |
| **扩展流程**       | 1a.输入重复账户名称 <br>2.系统提示错误并拒绝操作             |
| **特殊需求**       |                                                              |

| **id**             | 5                                            |
| ------------------ | -------------------------------------------- |
| **名称**           | 余额变动                                     |
| **创建者**         | 刘昕宇                                       |
| **最后一次更新者** | 刘昕宇                                       |
| **创建日期**       | 2022.6.28                                    |
| **最后更新日期**   | 2022.6.28                                    |
| **参与者**         | 财务人员                                     |
| **触发条件**       | 收款单或付款单或工资单审批通过               |
| **前置条件**       | 发送消息提示财务人员完成银行账户相关操作     |
| **优先级**         | 高                                           |
| **正常流程**       | 1.在账户列表中寻找对应账户<br>2.进行相应操作 |
| **扩展流程**       |                                              |
| **特殊需求**       |                                              |

| **id**             | 6                                                            |
| ------------------ | ------------------------------------------------------------ |
| **名称**           | 制定收款单                                                   |
| **创建者**         | 刘昕宇                                                       |
| **最后一次更新者** | 刘昕宇                                                       |
| **创建日期**       | 2022.6.30                                                    |
| **最后更新日期**   | 2022.6.30                                                    |
| **参与者**         | 进货销售人员                                                 |
| **触发条件**       | 公司销售给客户产品时                                         |
| **前置条件**       | 客户确认购买                                                 |
| **优先级**         | 高                                                           |
| **正常流程**       | 1.输入客户信息以及收款的各种信息<br>2.确认信息无误后完成收款单的制订 |
| **扩展流程**       | 1a.输入错误信息 <br>2.系统提示错误并拒绝操作                 |
| **特殊需求**       |                                                              |

| **id**             | 7                                                            |
| ------------------ | ------------------------------------------------------------ |
| **名称**           | 审批收款单                                                   |
| **创建者**         | 刘昕宇                                                       |
| **最后一次更新者** | 刘昕宇                                                       |
| **创建日期**       | 2022.6.30                                                    |
| **最后更新日期**   | 2022.6.30                                                    |
| **参与者**         | 总经理                                                       |
| **触发条件**       | 出现了新的收款单                                             |
| **前置条件**       | 总经理确认收款信息无误                                       |
| **优先级**         | 高                                                           |
| **正常流程**       | 1.总经理完成审批<br>2.修改客户应付信息<br>3.修改对应账户余额 |
| **扩展流程**       |                                                              |
| **特殊需求**       |                                                              |

| **id**             | 8                                                            |
| ------------------ | ------------------------------------------------------------ |
| **名称**           | 期初建账                                                     |
| **创建者**         | 于金甲                                                       |
| **最后一次更新者** | 于金甲                                                       |
| **创建日期**       | 2022.07.08                                                   |
| **最后更新日期**   | 2022.07.08                                                   |
| **参与者**         | 财务人员                                                     |
| **触发条件**       | 期初建账                                                     |
| **前置条件**       | 财务人员已经被识别                                           |
| **优先级**         | 高                                                           |
| **正常流程**       | 1.开始本期的期初建账 <br>2.录入分类信息 <br>3.录入商品信息 <br>4.录入客户信息 <br>5.录入账户信息 <br> 6.使用期初建账来初始化本期的分类，商品，客户，账户信息 |
| **扩展流程**       |                                                              |
| **特殊需求**       | 2-5a.输入非法信息 <br> 1.系统提示错误并拒绝操作 <br>2-5b.修改已经录入的信息 <br> 1.通过条件查询获得数据后更改 |

| **id**             | 9                                                            |
| ------------------ | ------------------------------------------------------------ |
| **名称**           | 查看经营历程表                                               |
| **创建者**         | 张翼                                                         |
| **最后一次更新者** | 张翼                                                         |
| **创建日期**       | 2022.6.26                                                    |
| **最后更新日期**   | 2022.7.9                                                     |
| **参与者**         | 财务人员， 总经理                                            |
| **触发条件**       | 输入筛选条件（时间区间，单据类型，客户，业务员，仓库），点击确认 |
| **前置条件**       | 员工的身份已经被确认                                         |
| **优先级**         | 高                                                           |
| **正常流程**       | 1.在经营里程表页面点击查看按钮<br> 2.输入帅选输入筛选条件（时间区间，单据类型，客户，业务员，仓库），点击确认 <br> 3.系统返回查询结果，并显示在前端页面 |
| **扩展流程**       | 1a.输入筛选条件不全 <br> 2.系统提示错误并拒绝操作            |
| **特殊需求**       |                                                              |

|   **id**    |                10                |
|:-----------:|:--------------------------------:|
|   **名称**    |                红冲                |
|   **创建者**   |                张翼                |
| **最后一次更新者** |                张翼                |
|  **创建日期**   |            2022.6.26             |
| **最后更新日期**  |             2022.7.9             |
|   **参与者**   |               财务人员               |
|  **触发条件**   |              点击红冲按钮              |
|  **前置条件**   |            查询经营里程表结束             |
|   **优先级**   |                高                 |
|  **正常流程**   | 1.点击红冲确认按钮<br> 2.系统生成数量或单价取反的单据 |
|  **扩展流程**   |                                  |
|  **特殊需求**   ||

| **id**             | 10                                                          |
| ------------------ | ----------------------------------------------------------- |
| **名称**           | 制定付款单                                                  |
| **创建者**         | 于金甲                                                      |
| **最后一次更新者** | 于金甲                                                      |
| **创建日期**       | 2022.07.04                                                  |
| **最后更新日期**   | 2022.07.04                                                  |
| **参与者**         | 总经理，财务人员                                            |
| **触发条件**       | 制定付款单                                                  |
| **前置条件**       | 总经理身份或财务人员已经被识别                              |
| **优先级**         | 高                                                          |
| **正常流程**       | 1.制定付款单<br> 2.输入单据内容 <br> 3.提交单据 <br> 4.审批 |
| **扩展流程**       |                                                             |
| **特殊需求**       | 2a.输入非法信息 <br> 1.系统提示错误并拒绝操作               |

| **id**             | 11                                                           |
| ------------------ | ------------------------------------------------------------ |
| **名称**           | 查看销售明细表                                               |
| **创建者**         | 于金甲                                                       |
| **最后一次更新者** | 于金甲                                                       |
| **创建日期**       | 2022.07.04                                                   |
| **最后更新日期**   | 2022.07.04                                                   |
| **参与者**         | 总经理，财务人员                                             |
| **触发条件**       | 查看销售明细表                                               |
| **前置条件**       | 总经理身份或财务人员已经被识别                               |
| **优先级**         | 高                                                           |
| **正常流程**       | 1.查看销售明细表<br> 2.选择查询条件 <br> 3.执行查询 <br> 4.查看结果 |
| **扩展流程**       |                                                              |
| **特殊需求**       | 3a.输入非法查询信息 <br> 1.系统提示错误并拒绝操作            |

| **id**             | 12                                                           |
| ------------------ | ------------------------------------------------------------ |
| **名称**           | 制定年终奖                                                   |
| **创建者**         | 于金甲                                                       |
| **最后一次更新者** | 于金甲                                                       |
| **创建日期**       | 2022.07.04                                                   |
| **最后更新日期**   | 2022.07.04                                                   |
| **参与者**         | 总经理                                                       |
| **触发条件**       | 制定年终奖                                                   |
| **前置条件**       | 总经理身份已经被识别                                         |
| **优先级**         | 高                                                           |
| **正常流程**       | 1.查看员工本年度表现情况<br> 2.输入每个员工的年终奖 <br> 3.提交年终奖结果 <br> 4.保存年终奖记录 |
| **扩展流程**       |                                                              |
| **特殊需求**       | 2a.输入非法金额信息 <br> 1.系统提示错误并拒绝操作            |


| **id**             | 13                                                    |
| ------------------ |-------------------------------------------------------|
| **名称**           | 查看经营情况表                                               |
| **创建者**         | 章豪                                                    |
| **最后一次更新者** | 章豪                                                    |
| **创建日期**       | 2022.7.4                                              |
| **最后更新日期**   | 2022.7.4                                              |
| **参与者**         | 财务人员，总经理                                              |
| **触发条件**       | 点击查看                                                  |
| **前置条件**       | 人员身份已经被识别                                             |
| **后置条件**       | 无                                                     |
| **优先级**         | 中                                                     |
| **正常流程**       | 1.选择起始日期，点击查看经营情况表<br>2.页面上显示这段时间的折让后总收入，折让金额，总支出，总利润 |
| **扩展流程**       | 1a.起始日期比结束日期晚 <br> 2.系统提示错误并拒绝操作                      |
| **特殊需求**       | 无                                                     |

| **id**             | 14                                                                               |
| ------------------ |----------------------------------------------------------------------------------|
| **名称**           | 制定工资单                                                                            |
| **创建者**         | 章豪                                                                               |
| **最后一次更新者** | 章豪                                                                               |
| **创建日期**       | 2022.6.28                                                                        |
| **最后更新日期**   | 2022.6.28                                                                        |
| **参与者**         | 财务人员，总经理                                                                         |
| **触发条件**       | 月初发工资时                                                                           |
| **前置条件**       | 财务人员身份已经被识别                                                                      |
| **后置条件**       | 交由总经理审批，审批通过后会汇款                                                                 |
| **优先级**         | 高                                                                                |
| **正常流程**       | 1.选择日期，点击创建<br>2.页面上显示所有工资单，包含姓名，银行账户信息，应发工资，扣除税款，缺席扣除，实发工资，创建人 <br>3.系统返回创建是否成功 |
| **扩展流程**       | 1a.选择了非工资发放日期 <br> 2.系统提示错误并拒绝操作<br>2 a.实发工资为计算为负数<br> 2.系统显示为0                  |
| **特殊需求**       | 无                                                                                |


| **id**             | 15                                                                                                           |
| ------------------ |--------------------------------------------------------------------------------------------------------------|
| **名称**           | 制定促销策略                                                                                                       |
| **创建者**         | 章豪                                                                                                           |
| **最后一次更新者** | 章豪                                                                                                           |
| **创建日期**       | 2022.7.9                                                                                                     |
| **最后更新日期**   | 2022.7.9                                                                                                     |
| **参与者**         | 总经理                                                                                                          |
| **触发条件**       | 总经理点击制定促销策略                                                                                                  |
| **前置条件**       | 人员身份已经被识别                                                                                                    |
| **后置条件**       | 修改符合促销条件的销售单，在采用赠品促销策略是会开具赠品单                                                                                |
| **优先级**         | 高                                                                                                            |
| **正常流程**       | 1.设定起止时间，根据触发条件类型和促销类型填写对应的信息<br>2.点击创建                                                                      |
| **扩展流程**       | 1a.起始日期比结束日期晚 <br> 2.系统提示错误并拒绝操作<br>1b.触发条件类型对应的信息不完全<br> 2.系统提示错误并拒绝操作<br>1c.促销类型对应的信息不完全<br> 2.系统提示错误并拒绝操作 |
| **特殊需求**       | 无                                                                                                            |


## erp软件需求规格说明文档

| 版本号 |                                           |
| ------ | ----------------------------------------- |
| v0.1   | 创建文档，添加了3.2.1~3.2.10的内容        |
| v1.0   | 添加图片，版本号，并添加3.2.11~3.2.15内容 |



### 1.引言
#### 1.1目的
本文档描述了ERP系统的销售模块的功能需求与非功能需求，后续软件系统的实现与验证都基于此文档
#### 1.2范围
员工管理模块是帮助人力资源人员进行员工管理
#### 1.3参考文献
《软件工程与技术（卷二）》
### 2.总体描述
#### 2.1商品前景
##### 2.1.1背景
一民营企业专业从事灯具开关行业，是某著名开关品牌的南京地区总代理，主要在南京负责品牌的推广及项目的落地销售、分销的批发等工作，
服务对象包括项目业主、施工单位、分销商、设计院、终端用户等。
现公司规模扩大，企业业务量、办公场所、员工数都发生增长，为适应新的环境，提高工作效率和用户满意度，该公司聘南鲸软件科技公司开发一套 ERP 系统。该系统主要包括：库存管理、销售管理、财务管理、人事管理和企业经营管理。
销售模块就是为了满足销售管理业务开发的，它包括一个数据集中服务器和多个客户端，数据集中服务器储存维护所有数据，客户端帮助销售人员完成日常工作，二者通过实时通信完成数据交换
##### 2.1.2业务需求
系统上线运行六个月后，碱少积压的库存，增加销售额、提高工作效率，为经理的决策做支持。
#### 2.2商品功能
SF1：管理员工信息
SF2：员工打卡
SF3：制定员工薪酬
SF4：管理账户信息
SF5：余额变动
SF6：制定收款单
SF7：审批收款单
SF8 期初建账
SF9 查看经营历程表
SF10：制定付款单
SF11：查看销售明细表
SF12：制定年终奖
SF13：查看一段时间的经营情况表
SF14：制定工资单
#### 2.3用户特征
人力资源人员：1 到 2 名。办公信息化系统较强。进行员工管理 。
财务人员：1 到 2 名。办公信息化系统较强，持积极态度。不希望增加现有工作量。
#### 2.4约束
CON1：系统运行在windows系统或mac系统上
CON2：系统使用web界面
### 3.详细需求描述
#### 3.2 功能需求
##### 3.2.1 员工管理
###### 3.2.1.1 特性描述
人力资源人员登录系统后，在员工管理页面点击增加员工，输入员工信息，完成员工入职，并为员工提供账号。
###### 3.2.1.2刺激/响应序列
刺激：人力资源人员点击员工入职按钮。
响应：系统弹出员工信息登记表。
刺激：人力资源人员登记员工信息完成后，点击确定。
响应：系统检查信息合法性，如不合法，显示错误信息，如果合法，创建员工。
刺激：新员工入职
响应：系统为该员工提供默认账号
###### 3.2.1.3相关功能需求
| 编号                                                                              | 需求描述                                                                                                                      |
|:--------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------|
| staff.add.Start<br/> staff.add.Input<br/>staff.add.check<br/> sale.add.complete | 点击员工入职按钮后，允许人力资源人员添加新员工<br/>系统允许用户登记新员工的信息<br/>在登记完员工信息点击提交后，系统要检查输入信息合法性，如果不合法，需要弹出错误信息。信息无误则返回正确 <br/> 在入职完成后，系统为员工提供账号 |
##### 3.2.2 员工薪酬制定
###### 3.2.2.1 特性描述
人力资源人员在登录系统后，为不同级别员工制定对应的薪酬
###### 3.2.2.2 刺激响应序列
刺激：人力资源人员进入员工管理界面。
响应：系统显示所有员工信息，包括级别与当前薪酬。
刺激：人力资源人员点击员工对应的薪酬修改按钮。
响应：系统提供输入框，使得人力资源人员修改员工薪酬。
刺激：人力资源人员修改完成后，点击确认。
响应：系统修改该员工的薪酬。
###### 3.2.2.3相关功能需求
| 编号                                                                                                                  | 需求描述                                                                                             |
|:--------------------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------|
| staff.salary.show<br/> staff.salary.amend.start<br/>staff.salary.amend.input<br/> staff.salary.amend.start.complete | 人力资源人员进入员工管理界面后，显示该员工的级别与薪酬<br/人力资源人员点击某员工的薪酬修改<br/>人力资源人员输入该员工新的薪酬 <br/> 人力资源人员点击确认后，系统修改该员工的薪酬 |
##### 3.2.3 员工打卡
###### 3.2.2.1 特性描述
员工登录系统，进行每日打卡
###### 3.2.2.2 刺激响应序列
刺激：员工登录系统点击打卡按钮
响应：系统完成员工当日打卡
###### 3.2.2.3相关功能需求
| 编号             | 需求描述               |
|:---------------|:-------------------|
| staff.clock_in | 员工登录系统，点击打卡按钮，完成打卡 |
##### 3.2.3账户管理

###### 3.2.3.1 特性描述

ADMIN账户登录系统后，在账户管理页面点击增加账户，输入账户信息，完成新增账户。

###### 3.2.3.2刺激/响应序列

刺激：ADMIN账户点击新建账户按钮。
响应：系统弹出账户信息登记表。
刺激：人力资源人员登记账户信息完成后，点击确定。
响应：系统检查信息合法性，如不合法，显示错误信息，如果合法，创建账户。

###### 3.2.3.3相关功能需求

| 编号                                                         | 需求描述                                                     |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| acount.add.Start<br/>acount.add.Input<br/>acount.add.check <br /> | 点击新建账户按钮后，允许ADMIN用户添加新账户<br />系统允许用户登记新账户的信息<br/>在登记完账户信息点击提交后，系统要检查输入信息合法性，如果不合法，需要弹出错误信息。信息无误则返回正确 |

| 编号                                                         | 需求描述                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| account.remove.Start<br />account.remove.Input<br />account.remove.check<br /> | 点击删除账户后允许ADMIN用户删除账户<br />系统允许用户输入待删除账户的名称<br />在输入名称后系统检测是否合法，如果不合法需要弹出错误信息。信息无误则返回正确。 点击查找账户后允许ADMIN用户查找账户 |

| 编号                                                         | 需求描述                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| account.select.Start<br />account.select.Input<br />account.select.search<br />account.modify.Start<br />account.modify.Input<br />account.modify.check | 系统允许ADMIN点击查询按钮开始查询账户信息<br />系统允许ADMIN用户输入查找账户名称<br />在输入名称后系统进行查找,如果查询成功则返回余额，否则弹出错误信息<br />点击修改账户按钮后系统允许ADMIN账户修改账户名称<br />系统允许用户输入旧名称和新名称<br />系统进行修改，如果修改失败则弹出错误信息 |

##### 3.2.4 余额变动

###### 3.2.4.1 特性描述

收付款单和工资单审批通过后系统自动修改相应账户余额

###### 3.2.4.2 刺激响应序列

刺激：单据审批通过
响应：系统查找相关账户，并修改余额

###### 3.2.4.3相关功能需求

| 编号                                        | 需求描述                       |
| :------------------------------------------ | :----------------------------- |
| acount.change.add<br />acount.change.reduce | 增加账户余额<br />减少账户余额 |
##### 3.2.5 制定收款单

###### 3.2.5.1 特性描述

进货销售人员登录系统后点击制定收款单按钮，输入相关信息后即可制定收款单。

###### 3.2.5.2刺激/响应序列

刺激：进货销售人员点击新建收款单按钮。
响应：系统弹出收款单信息登记表。
刺激：进货销售人员登记账户信息完成后，点击确定。
响应：系统检查信息合法性，如不合法，显示错误信息，如果合法，创建收款单。

###### 3.2.5.3相关功能需求

| 编号                                                         | 需求描述                                                     |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| creditSheet.add.start<br />creditSheet.add.input<br />creditSheet.add.check | 点击新建收款单按钮后系统允许进货销售人员制定收款单<br />系统允许进货销售人员输入进货单相关信息<br />系统检查相关信息无误后完成制定 |

##### 3.2.6 审批收款单

###### 3.2.6.1 特性描述

收付款单和工资单审批通过后系统自动修改相应账户余额

###### 3.2.6.2 刺激响应序列

刺激：单据审批通过
响应：系统查找相关账户，并修改余额

###### 3.2.6.3相关功能需求

| 编号                                                       | 需求描述                                                     |
| :--------------------------------------------------------- | :----------------------------------------------------------- |
| creditSheet.approval.pass<br />creditSheet.approval.modify | 系统允许总经理点击审批按钮完成销售单的审批<br />完成审批后系统自动完成相关信息的更新 |
###### 3.2.7.1 特性描述
进行每期的期初建账保留原始信息，作为本期营业的初始化状态，随时可查询
###### 3.2.7.2刺激/响应序列
刺激：开始本期期初建账。
响应：允许录入信息。
刺激：提交分类信息。
响应：存储提交的信息。
刺激：提交商品信息。
响应：存储提交的信息。
刺激：提交客户信息。
响应：存储提交的信息。
刺激：提交账户信息。
响应：存储提交的信息。
刺激：执行期初建账
响应：用期初建账数据初始化分类、商品、客户、账户数据库。
##### 3.2.8 经营历程查询

###### 3.2.8.1 特性描述

财务人员登录系统后，在经营历程查询点击查询，输入约束信息，完成查询，并为财务人员提供结果。

###### 3.2.8.2刺激/响应序列

刺激：财务人员点击查询按钮。 响应：系统弹出约束信息输入框。 刺激：财务人员登记信息完成后，点击确定。 响应：系统检查信息合法性，如不合法，显示错误信息，如果合法，开始检索。

###### 3.2.8.3相关功能需求

| 编号                                                         | 需求描述                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ManageProcSheet.Search.Start<br />ManageProcSheet.Search.Input<br />ManageProcSheet,Search.End | 系统允许操作员点击查询按钮开始查询<br />系统允许操作员输入约束信息<br />系统在验证约束信息无误的情况下返回查询结果 |

| 编号                                                         | 需求描述                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ManageProcSheet.redflash.make<br />ManageProcSheet.Search.copy | 系统允许操作员点击制作红冲按钮开始制作红冲<br />系统允许操作员输入信息重置单据 |
##### 3.2.9 制定付款单
###### 3.2.9.1 特性描述
认证生效后，制定付款单
###### 3.2.9.2刺激/响应序列
刺激：点击制定付款单按钮。
响应：系统弹出付款单制定界面。
刺激：输入付款单内容。
响应：录入付款单内容。
刺激：提交付款单。
响应：执行制定付款单业务。
##### 3.2.10 查看销售明细表
###### 3.2.10.1 特性描述
认证生效后，查看销售明细表
###### 3.2.10.2刺激/响应序列
刺激：点击查看销售明细表按钮。
响应：系统弹出筛选条件选择。
刺激：选择筛选条件。
响应：执行查询，显示结果
##### 3.2.11 制定年终奖
###### 3.2.11.1 特性描述
认证生效后，制定年终奖
###### 3.2.12.2刺激/响应序列
刺激：查看员工本年度表现。
响应：系统展示本年度员工的工资情况。
刺激：输入年终奖内容。
响应：录入年终奖内容。
刺激：提交年终奖。
响应：执行制定年终奖业务。
##### 3.2.13 查看经营情况表

###### 3.2.13.1 特性描述

财务人员登陆系统后，在查看经营情况表页面点击起始日期，查看经营历程表。

###### 3.2.13.2刺激/响应序列

刺激：财务人员或总经理点击查看经营历程表按钮。
响应：系统切换到经营历程表界面。
刺激：财务人员或总经理在选择日期完成后，点击确定。
响应：系统检查信息合法性，合法则在后面显示这段时间的折让后总收入，折让金额，总支出，总利润 。

###### 3.2.13.3相关功能需求

| 编号                               | 需求描述                                                     |
| :--------------------------------- | :----------------------------------------------------------- |
| Balance.setDate<br>Balance.Invalid | 系统允许设置起始时间<br>系统在信息不合法的情况下返回无效提示 |

##### 3.2.14 制定工资单
###### 3.2.14.1 特性描述
财务人员登陆系统后，在制定工资单页面点击制定工资单，选择日期，制定工资单。
###### 3.2.14.2刺激/响应序列
刺激：人力资源人员点击制定工资单按钮。
响应：系统弹出工资单。
刺激：人力资源人员在选择日期完成后，点击确定。
响应：系统检查信息合法性，合法则在后面显示该日期下的工资单（姓名，岗位，银行账户信息，应发工资，扣除税款，缺席扣除，实发工资）。
刺激：工资单审批完成后。
响应：自动汇款。

###### 3.2.14.3相关功能需求
| 编号                                                         | 需求描述                                                     |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| SalarySheet.Create<br/>SalarySheet.SelectID<br/>SalarySheet.End<br/>SalarySheet.Invalid<br>SalarySheet.Approval | 系统允许人力资源人员点击制定工资单按钮。<br>系统允许人力资源人员选择员工编号<br>在务人员选择员工编号点击提交后，系统要检查输入信息合法性，如果不合法，需要弹出错误信息。信息无误则返回正确，并添加进数据库<br>系统允许特权人员对工资单审批 |

##### 3.2.15 制定销售策略

###### 3.2.15.1 特性描述

总经理登陆系统后，在制定促销策略页面点击输入促销策略信息，点击创建。

###### 3.2.15.2刺激/响应序列

刺激：总经理点击制定促销策略一栏。
响应：系统切换到制定促销策略界面。
刺激：总经理在填写促销信息完成后，点击确定。
响应：系统检查信息合法性，合法则创建成功。

###### 3.2.15.3相关功能需求

| 编号                           | 需求描述                                     |
| :----------------------------- | :------------------------------------------- |
| Promote.create<br>Promote.show | 系统允许制定促销策略<br>系统展示所有促销内容 |

#### 3.3非功能需求
##### 3.3.1安全性
Safety1: 系统只允许经过验证和授权的用户访问
Safety2 系统应该按照用户身份验证用户的访问权限
##### 3.3.2可维护性
##### 3.3.3易用性
##### 3.3.4可靠性
##### 3.3.3.5业务规则
##### 3.3.6约束
#### 3.4数据需求
##### 3.4.1数据定义
IC1: 系统需要存储员工信息（员工id，姓名、性别、出生日期、手机、工作岗位、基本工资、岗位工资、岗位级别、薪资计算方式、薪资方法方式、工资卡账户薪资发放方式、扣税信息）。

IC2: 系统需要存储员工打卡信息（日期，员工id）

IC3：系统需要存储员工账号信息（id，name，password，role）

IC4: 系统需要存储账户信息（账户名称，账户余额）。

IC5: 系统需要存储账户明细

IC6: 系统需要存储收款单相关信息(单据编号， 客户，操作员，转账列表，总额汇总。转账列表中的一项包含：银行账户，转账金额，备注)

IC7:期初建账商品分类（分类id，类名，父节点id，是否为叶节点，商品个数，插入的下一个index）

IC8:期初建账商品（商品编号，商品名，分类id，型号，进价，零售价，最近进价，最近售价）

IC9:期初建账客户（编号，类型，级别，名字，联系电话，地址，邮编，邮箱，信用额度，应收，应付，默认操作员）

IC10:期初建账账户（账户名，余额，卡号）

IC11:付款单（单据编号，操作员，银行账户，条目清单，总额）

IC12:条目清单（条目名，金额，备注）

IC13:销售明细表（时间，商品名，型号，数量，单价，总额）

IC14:销售明细筛选条件（起始时间，终止时间，商品名，客户，业务员，仓库）

IC15:年终奖（员工编号，员工姓名，员工银行账户信息，应发工资，扣除税款，缺席扣除，实际工资，年终奖）

IC16: 系统需要存储经营情况表信息（这段时间的折让后总收入，折让金额，总支出，总利润 ）

IC17: 系统需要存储工资单信息（含单据编号、员工编号、姓名、银行账户信息、应发工资、扣除税款（个人所得税、失业保险、住房公积金）、缺勤扣除、实发金额），审核状态，时间）

IC18: 系统需要存储促销信息（促销策略id，创建人，开始时间，过期时间，触发条件类型，客户等级，第一个目标商品id，第一个目标商品触发数量，第二个目标商品id，第二个目标商品触发数量，第三个目标商品id，第三个目标商品触发数量，触发的总价，促销类型，赠品id，赠品数目，折扣，代金券金额）

##### 3.4.2默认数据
默认数据为以下情况：
·员工入职后提供默认账号

Default1：员工默认账号，name为姓名拼音，密码为123456。

默认数据为以下情况：
账户新建或删除后向财务人员提供相关信息：

Default1:账户名称，格式为字符串且不可重复

Default2:账户余额，格式为正整数

新建收款单时需要自动生成以下信息:

Default1:单据编号（SKD-yyyyMMdd-xxxxx)

期初建账时默认

default1 商品进价、零售价默认取上半年平均

default2 商品最近进价、最近售价默认留空 

default3 客户应收、应付默认为期初建账前遗留的

default4 账户余额默认是0

制定付款单默认

Format1 单据编号XJFYD-yyyyMMdd-xxxxx

Format2 金额为正整数（向上取整）单位为元


##### 3.4.2数据格式要求

Format1 员工工资保留为正整数（向上取整）单位为元

Format2 商品编号分类id(11位) + 位置(5位)

Format3 金额为正整数（向上取整）单位为元

Format4 日期的格式为yyyy-mm-dd。

Format5 金额为正整数（向上取整）单位为元

Format6 筛选日期的格式为yyyy-mm-dd 00：00：00

Format7 表中日期格式为yyyy-mm-dd

Format8 员工工资保留为正整数（向上取整）单位为元



## ERP系统软件体系结构描述文档

| 版本号 |            |
| ------ | ---------- |
| v0.1   | 创建并完成 |



### 1.引言
#### &emsp;&emsp; 1.1编制目的
&emsp;&emsp;本报告详细完成对ERP系统的概要设计，达到知道详细设计和开发的目的，同时实现和测试人员及用户的沟通。  
&emsp;&emsp;本报告面向开发人员、测试人员、以及最终用户编写，是了解系统的导航。
#### &emsp;&emsp; 1.2词汇表
| 词汇名称               | 词汇含义               | 备注                |
|--------------------|--------------------|-------------------|
| ERP                | 企业资源管理计划           | .......           |
| ......             | ......             | ......            |  
#### &emsp;&emsp; 1.3参考资料
### 2.产品概述
&emsp;&emsp;参考ERP系统用例文档和软件需求规格说明中对产品的概况和描述。
### 3.逻辑视角
&emsp;&emsp;ERP系统中，选择了分层体系结构风格，将系统分为三层（展示层、业务逻辑层、数据层）能够很好地示意整个高层抽象。展示层包含GUI界面的实现，业务逻辑层包含业务逻辑的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑视角和逻辑设计方案如下图所示。  
![包图逻辑表达视角]()
//todo
![软件体系结构逻辑设计方案]()
//todo
### 4.组合视角
#### &emsp;&emsp; 4.1开发包图
| 开发（物理）包          | 依赖的其他开发包               | 
|------------------|------------------------|
| staffui          | staffcontroller，vue,vo |
| staffcontroller  | vo,staffservice,po     |
| staffservice     | staffserviceimpl ,po   |
| staffserviceimpl | staffdao,po            |
| staffdao         | staffMapper,po         | 
| staffMapper      | po,databaseutility     |
| vo               |                        |
| po               |                        |
| vue              |                        |
| databaseutility  | Mybatis                |
| accountui             | accountcontroller，vue,vo |
| accountcontroller     | vo,accountservice,po      |
| accountservice        | accountserviceimpl ,po    |
| accountserviceimpl    | accountdao,po             |
| accountdao            | accountMapper,po          |
| accountMapper         | po,databaseutility        |
| creditSheetui          | creditSheetcontroller，vue,vo |
| creditSheetcontroller  | vo,creditSheetservice,po      |
| creditSheetservice     | creditSheetserviceimpl ,po    |
| creditSheetserviceimpl | creditSheetdao,po             |
| creditSheetdao         | creditSheetMapper,po          |
| creditSheetMapper      | po,databaseutility            |
| establishmentui          | establishmentcontroller，vue,vo |
| establishmentcontroller  | vo,establishmentservice,po     |
| establishmentservice     | establishmentserviceimpl ,po   |
| establishmentserviceimpl | establishmentdao,po            |
| establishmentdao         | establishmentMapper,po         | 
| establishmentMapper      | po,databaseutility     |
| manageProcui          | manageProccontroller，vue,vo |
| manageProccontroller  | vo,manageProcservice,po      |
| manageProcservice     | manageProcserviceimpl ,po    |
| manageProcserviceimpl | manageProcdao,po             |
| manageProcdao         | manageProcMapper,po          |
| manageProcMapper      | po,databaseutility           |
| paymentui          | paymentcontroller，vue,vo |
| paymentcontroller  | vo,paymentservice,po     |
| paymentservice     | paymentserviceimpl ,po   |
| paymentserviceimpl | paymentdao,po            |
| paymentdao         | paymentMapper,po         | 
| paymentMapper      | po,databaseutility     |
| saleDetailui          | saleDetailcontroller，vue,vo |
| saleDetailcontroller  | vo,saleDetailservice,po     |
| saleDetailservice     | saleDetailserviceimpl ,po   |
| saleDetailserviceimpl | saleDetaildao,po            |
| saleDetaildao         | saleDetailMapper,po         | 
| saleDetailMapper      | po,databaseutility     |
| bonusui          | bonuscontroller，vue,vo |
| bonuscontroller  | vo,bonusservice,po     |
| bonusservice     | bonusserviceimpl ,po   |
| bonusserviceimpl | bonusdao,po            |
| bonusdao         | bonusMapper,po         | 
| bonusMapper      | po,databaseutility     |
| manageCondui          | manageCondController,vue,vo |
| manageCondController  | vo, manageCondService,po    |
| manageCondService     | manageCondServiceImpl,po    |
| manageCondServiceImpl | manageProcService,vo        |
| promoteui          | promoteController,vue,vo                  |
| promoteController  | vo,promoteService,po                      |
| promoteService     | promoteServiceImpl,po                     |
| promoteServiceImpl | promoteDao，customerDao，warehouseService |
| promoteDao         | promoteMapper,po                          |
| promoteMapper      | po,databaseutility                        |
| salaryui          | salaryController,vue,vo                            |
| salaryController  | vo,salaryService,po                                |
| salaryService     | salaryServiceImpl,po                               |
| salaryServiceImpl | salaryDao,staffService,accountService,bonusService |
| salaryDao         | salaryMapper,po                                    |
| salaryMapper      | po,databaseutility                                 |


![开发包图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-包图.png)  



#### 4.2 运行时进程

在ERP系统中会有一个服务器端进程和多个客户端进程，相应的进程图如下图所示。结合部署图，客户端进程是在客户端机器上运行，服务器端程序在服务器端极其上运行。

#### 4.3 物理部署

ERP系统中客户端构建是放在客户端机器上，服务器端构件放在服务器端机器上。在客户端节点上，需要部署JDK8。

### 5 接口视角

#### 5.1 模块的职责

客户端模块和服务端模块视图如下图所示。
![图5.1.1]()
//todo

| 层     | 职责                      |
|-------|-------------------------|
| 用户界面层 | 用户在界面进行相应操作             |
| 业务逻辑层 | 对于用户的输入进行相应的逻辑处理        |
| 数据层   | 将逻辑处理的结果存入到数据库或读取数据库的内容 |

每一层只是使用下方直接接触的层。层与层之间仅仅是通过接口的调用实现的。层与层之间的接口调用如下。

| 接口              | 服务调用方 | 服务提供方 |
|-----------------|-------|-------|
| staffcontroller | 展示层   | 业务逻辑层 |
| staffDao        | 业务逻辑层 | 数据层   |
| accountcontroller | 展示层     | 业务逻辑层 |
| accountDao        | 业务逻辑层 | 数据层     |
| creditSheetcontroller | 展示层     | 业务逻辑层 |
| creditSheetDao        | 业务逻辑层 | 数据层     |
| establishmentcontroller | 展示层   | 业务逻辑层 |
| establishmentDao        | 业务逻辑层 | 数据层   |
| manageProccontroller | 展示层     | 业务逻辑层 |
| manageProcDao        | 业务逻辑层 | 数据层     |
| paymentcontroller | 展示层   | 业务逻辑层 |
| paymentDao        | 业务逻辑层 | 数据层   |
| saleDetailcontroller | 展示层   | 业务逻辑层 |
| saleDetailDao        | 业务逻辑层 | 数据层   |
| bonuscontroller | 展示层   | 业务逻辑层 |
| bonusDao        | 业务逻辑层 | 数据层   |
| salaryservicecontroller | 展示层     | 业务逻辑层 |
| salaryDao               | 业务逻辑层 | 数据层     |
| PromoteController | 展示层     | 业务逻辑层 |


#### 5.2用户界面层的分解
![图5.1.2]()
//todo
用户界面层的分解

根据需求，系统存在25个用户界面：登录界面、管理员主页面、总经理主页面、库存管理人员主页面、进货销售人员主页面、销售经理主页面、财务人员主页面、人力资源人员主页面、账户新建和管理页面、商品管理、商品分类管理、库存管理、客户管理与查询、销售进退货、审批单据、设定薪资信息、审核工资单、登记员工入职信息、账户管理、制定单据、查看经营历程表、查看经营情况表、查看销售明细表、制定促销策略。页面跳转如图所示。


#### 5.3业务逻辑层的分解

![]()
//todo
##### 5.3.1 业务逻辑层模块的职责

| 模块    | 职责               |
|-------|------------------|
| staff | 实现员工入职，薪酬制定，员工打卡 |
| account | 实现账户增删改查，余额变动 |
| credit | 实现收款单的制定和审批 |
| establishment | 期初建账 |
| manageProc | 实现经营历程查询 |
| payment | 制定付款单 |
| saleDetail | 实现促销策略制定 |
| bonus | 制定年终奖 |
| ManageCond | 查看经营情况表 |
| PromoteService | 负责制定促销策略的服务 |
##### 5.3.2业务逻辑层模块的接口规范
**staff模块的接口规范**
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">addStaff</td>
   	    <td>语法</td>
   	    <td>public int addStaff(StaffVO staff) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入新员工的信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将员工信息添加进数据库并为其创建账户</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">staff_salary_amend</td>
   	    <td>语法</td>
   	    <td> public int updateSalary(Role role, Integer salary)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>制定岗位的新工资</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该工资信息存储到数据库中</td>
   	</tr>
	<tr >
   	    <td rowspan="3">staff_clock_in</td>
   	    <td>语法</td>
   	    <td> public int clockIn(String name)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td> 员工打卡</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工打卡信息存储到数据库中</td>
   	</tr>
   </table>
  


| 需要的服务                                                                     |                 |
|---------------------------------------------------------------------------|-----------------|
| staffDao.addStaff(StaffPO staffPO)                                        | 添加新的员工          |
| staffDao.updateSalary(String role, Integer salary) | 修改对应职位薪酬        |
| staffDao.clockIn(ClockInPO clockInPO)                                    | 在数据库中增加该员工的打卡信息 |
| userDao.createUser(UserPO userPO) | 创建新的账户        |

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">createAccount</td>
   	    <td>语法</td>
   	    <td>public boolean createAccount(String accountName, String cardNum)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>登入ADMIN账号</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将账户信息添加进数据库</td>
   	</tr>
    <tr >
   	    <td rowspan="3">removeAccount</td>
   	    <td>语法</td>
   	    <td>public boolean removeAccount(String accountName)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>登入ADMIN账号</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将账户信息从数据库中删除</td>
   	</tr>
    <tr >
   	    <td rowspan="3">modifyAccount</td>
   	    <td>语法</td>
   	    <td>public boolean modifyAccount(String oldName, String newName)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>登入ADMIN账号</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>更新账户名称</td>
   	</tr>
    <tr >
   	    <td rowspan="3">updateAccount</td>
   	    <td>语法</td>
   	    <td>public boolean updateAccount(String accountName, BigDecimal amount)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>单据审核通过</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>更新账户余额</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectAccount</td>
   	    <td>语法</td>
   	    <td>public AccountPO selectAccount(String accountName)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>无</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回指定账户信息</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectAllAccount</td>
   	    <td>语法</td>
   	    <td>public List< AccountPO> selectAllAccount()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>无</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回所有账户信息</td>
   	</tr>
   </table>


| 需要的服务                                                   |                  |
| ------------------------------------------------------------ | ---------------- |
| accountDao.addAccount(AccountPO accountPO)                   | 添加新的账户     |
| accountDao.removeAccount(string accountName)                 | 删除账户         |
| accountDao.modifyAccount(string accountName, string newName) | 修改账户名称     |
| accountDao.updateAccount(string accountName, int amount)     | 修改账户余额     |
| accountDao.selectAccountByName(string accountName)           | 查找账户余额     |
| accountDao.selectAllAccount()                                | 查找所有账户名称 |

**creditSheet模块的接口规范**

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">makeSheet</td>
   	    <td>语法</td>
   	    <td>public void makeSheet(UserVO userVO, SheetVO sheetVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>确认身份</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将收款单信息添加进数据库</td>
   	</tr>
    <tr >
   	    <td rowspan="3">approval</td>
   	    <td>语法</td>
   	    <td>public void approval(String id, BaseEnum a)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>确认身份无误</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>自动修改应付信息和余额</td>
   	</tr>
   </table>

| 需要的服务                                                   |                                |
| ------------------------------------------------------------ | ------------------------------ |
| creditSheetDao.getLatest()                                   | 返回最新的收款单信息           |
| creditSheetDao.addCreditSheet(creditSheetPO creditSheetPO)   | 将信息添加进数据库             |
| creditSheetDao.passCreditSheet(string creditSheetId)         | 指定收款单信息修改为已通过     |
| creditSheetDao.selectCreditSheetByState(CreditSheetStatecreditSheetState) | 返回指定状态的收款单           |
| creditSheetDao.selectAllCreditSheet()                        | 返回所有收款单信息             |
| creditSheetDao.selectCreditSheetByState(CreditSheetState state) | 返回所有处于该状态的收款单信息 |
| creditSheetDao.updateCreditSheet(String creditSheetId, CreditSheetState creditSheetState) | 改变该收款单状态               |
| creditSheetDao.selectCreditSheetById(String creditSheetId)   | 返回该收款单信息               |
| creditSheetDao.selectCreditSheetContentById(String creditSheetId) | 返回该收款单具体内容           |
**establishment模块的接口规范**
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">addCategory</td>
   	    <td>语法</td>
   	    <td>int addCategory(CategoryVO categoryVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>获取分类信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储期初分类</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">addProduct</td>
   	    <td>语法</td>
   	    <td>int addProduct(ProductInfoVO productInfoVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>获取商品信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储期初商品</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">addCustomer</td>
   	    <td>语法</td>
   	    <td>int addCustomer(CustomerVO customerVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>获取客户信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储期初客户</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">addAccount</td>
   	    <td>语法</td>
   	    <td>int addAccount(AccountVO accountVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>获取账户信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储期初账户</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">initializeDataBase</td>
   	    <td>语法</td>
   	    <td>void initializeDataBase()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>录入全部期初建账信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>用期初建账信息初始化数据库</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">showCategory</td>
   	    <td>语法</td>
   	    <td>List< CategoryVO> showCategory()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的分类信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">showProduct</td>
   	    <td>语法</td>
   	    <td>List< ProductInfoVO> showProduct()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的商品信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">showCustomer</td>
   	    <td>语法</td>
   	    <td>List< CustomerVO> showCustomer()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的客户信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">showAccount</td>
   	    <td>语法</td>
   	    <td>List< AccountVO> showAccount()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的账户信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">selectCategory</td>
   	    <td>语法</td>
   	    <td>List< CategoryVO> selectCategory(CategoryVO categoryVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的符合条件的分类信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">selectProduct</td>
   	    <td>语法</td>
   	    <td>List< ProductInfoVO> selectProduct(ProductInfoVO productInfoVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的符合条件的商品信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">selectCustomer</td>
   	    <td>语法</td>
   	    <td>List< CustomerVO> selectCustomer(CustomerVO customerVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的符合条件的客户信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">selectAccount</td>
   	    <td>语法</td>
   	    <td>List< AccountVO> selectAccount(AccountVO accountVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的符合条件的账户信息</td>
   	</tr>
   </table> 

| 需要的服务                                                                     |                 |
|---------------------------------------------------------------------------|-----------------|
| establishmentDao.add*(PO po)              | 添加期初建账信息 |
| establishmentDao.show*()                  | 无条件查询 |
| establishmentDao.select*(PO po)           | 有条件查询 |
| categoryService.createCategory()          | 添加分类 |
| productService.createProduct()            | 添加商品 |
| customerService.addCustomer(customerPO)   | 添加客户 |
| accountService.createAccount()            | 添加账户 |
| categoryDao.findByCategoryId()            | 通过id获取分类 |
| establishmentDao.averagePurchase()        | 获得上半年平均进价 |
| establishmentDao.averageRetail()          | 获得上半年平均零售价 |
| establishmentDao.selectCustomerByName()   | 通过名字获得客户 |
**staff模块的接口规范**

| 提供的服务（接口名） | 属性               | 内容                                                      |
| -------------------- | ------------------ | --------------------------------------------------------- |
| searchProc           | 语法               | public Response searchProc(SearchProcVO staffVo)          |
| 前置条件             | 输入约束信息       |                                                           |
| 后置条件             | 将查询到的表单返回 |                                                           |
| makeRedFlash         | 语法               | public void makeRedFlush(RedFlushSheetVO redFlushSheetVO) |
| 前置条件             | 查询过单据信息     |                                                           |
| 后置条件             | 制作相应的红冲单   |                                                           |
| copy                 | 语法               | public void copy(RedFlushSheetVO redFlushSheetVO)         |
| 前置条件             | 制作过红冲单       |                                                           |
| 后置条件             | 重新制作单据       |                                                           |
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">makePaymentSheet
    </td>
   	    <td>语法</td>
   	    <td>public Response makePaymentSheet(PaymentSheetVO paymentSheetVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>获取付款单内容</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储付款单，更改客户与银行账户信息</td>
   	</tr>
   </table> 

| 需要的服务                                                                     |                 |
|---------------------------------------------------------------------------|-----------------|
| paymentDao.makeSheet(PaymentSheetVO paymentSheetVO)                                      | 添加新的付款单          |
**saleDetail模块的接口规范**
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">showSaleDetail
    </td>
   	    <td>语法</td>
   	    <td>public Response showSaleDetail(SaleDetailParamVO saleDetailParamVo) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>获取有效的筛选条件</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回销售明细表</td>
   	</tr>
   </table> 

| 需要的服务                                                                     |                 |
|---------------------------------------------------------------------------|-----------------|
| saleSheetDao.selectSheetByParam(saleDetailParamsVO)                 | 获得销售单          |
| saleSheetDao.findContentBySheetId(saleSheetId)                     | 获得销售单内容          |
| saleReturnsSheetDao.selectSheetByParam(saleDetailParamsVO)            | 获得销售退货单          |
| saleReturnsSheetDao.findContentBySaleReturnsSheetId(saleReturnsSheetId) | 获得销售退货单内容          |
| productService.getOneProductByPid(pid)                             | 根据id查询商品信息           |

**bonus模块的接口规范**
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">showPerformance
    </td>
   	    <td>语法</td>
   	    <td>public List< BonusVO > showTodoBonus()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td></td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回员工表现</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">makeBonus
    </td>
   	    <td>语法</td>
   	    <td>public boolean makeBonus(List< BonusVO> bonusVOS)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>总经理根据员工表现以及工资情况制定完成年终奖</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储年终奖信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">updateBonus
    </td>
   	    <td>语法</td>
   	    <td>public int updateBonus(BonusVO bonusVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>更改年终奖</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>修改年终奖信息</td>
   	</tr>
   </table> 

| 需要的服务                                                                     |                 |
|---------------------------------------------------------------------------|-----------------|
| salaryDao.findAll()                                      | 查看所有员工          |
| salaryDao.findAllSalary()                                      | 查看员工本年度工资情况          |
| bonusDao.makeBonus(bonusPO)                                     | 存储年终奖          |
| bonusDao.updateOneBonus(bonusPO)                           | 更改年终奖           |
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">makeManageCondInquiry</td>
   	    <td>语法</td>
   	    <td>public Response makeManageCondInquiry(@RequestBody BalanceTableVO balanceTableVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入起始日期信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回一个Response新的完整的VO包含折算后收入、折让、支出、利润信息</td>
   	</tr>
</table>

| 需要的服务                                                   |                                    |
| ------------------------------------------------------------ | ---------------------------------- |
| manageCondService.makeBalanceInquiry（@RequestBody BalanceTableVO balanceTableVO） | 根据含有起止日期的VO来返回完整信息 |

**工资单模块的接口规范**

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">makesheet</td>
   	    <td>语法</td>
   	    <td>public SalarySheetVO makeSheet(UserVO userVO, SalarySheetVO salarySheetVO) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入工资单信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将工资单信息添加进数据库，并返回一个新的完整的VO</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">approval</td>
   	    <td>语法</td>
   	    <td> public void approval(String salarySheetId, SalarySheetState state)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择工资单单号和审批状态</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>改变审批状态，成功则进行操作</td>
   	</tr>
	<tr >
   	    <td rowspan="3">getSheetByState</td>
   	    <td>语法</td>
   	    <td> public List< SalarySheetVO> getSheetByState(SalarySheetState state)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>点击对应的状态</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回该状态下的工资单</td>
   	</tr>
    	<tr >
   	    <td rowspan="3">makeAllSalarySheets</td>
   	    <td>语法</td>
   	    <td> public List< SalarySheetVO> makeAllSalarySheets(UserVO userVO, String date)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择发放日期</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>制定该日下的所有工资单，并存入数据库</td>
   	</tr>
   </table>

| 需要的服务                                                   |                                  |
| ------------------------------------------------------------ | -------------------------------- |
| salaryDao.getLatest()                                        | 获取最近一条工资单               |
| salaryDao.save(SalarySheetPO toSave)                         | 存入一条工资单记录               |
| salaryDao.findAll()                                          | 返回所有工资单                   |
| salaryDao.findAllByState(SalarySheetState state)             | 根据state返回工资单              |
| salaryDao.updateState(String SalarySheetId, SalarySheetState state) | 根据单号更新状态                 |
| salaryDao.findOneById(String salarySheetId)                  | 根据单号寻找工资单               |
| salaryDao.findByDateAndStaffName(String releaseDate, String staffName) | 返回该发放日期下的该员工的工资单 |
| accountService.updateAccount(String accountName, BigDecimal amount) | 更新公司银行账户信息             |
| staffService.showStaffInfo()                                 | 返回所有员工的信息               |
**查看经营情况表模块的接口规范**

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">createPromotion</td>
   	    <td>语法</td>
   	    <td>Response createPromotion(UserVO userVO, PromoteVO promoteVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入用户信息和促销信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回一个Response</td>
   	</tr>
       	<tr >
   	    <td rowspan="3">showAllPromotions</td>
   	    <td>语法</td>
   	    <td>List< PromoteVO> showAllPromotions()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>无</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>含有所有促销信息的list</td>
   	</tr>
    <tr >
   	    <td rowspan="3">promote</td>
   	    <td>语法</td>
   	    <td>SaleSheetPO promote(SaleSheetPO saleSheetPO, List< SaleSheetContentPO> saleSheetContentPOs);</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>传入待应用销售策略的销售单和其内容</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>补充完整的销售单，符合条件时会开具赠送单</td>
   	</tr>
</table>


| 需要的服务                                                   |                              |
| ------------------------------------------------------------ | ---------------------------- |
| promoteDao.save(promotePO)                                   | 将促销信息存入数据库         |
| promoteDao.findAll()                                         | 返回所有促销信息             |
| customerDao.findOneById(id)                                  | 根据id返回客户               |
| promoteDao.findAllByTriggerType(type)                        | 根据触发类型返回所有促销信息 |
| warehouseService.warehousePresent(presentId, presentNumber, operator, saleSheetPOId) | 创建赠送单                   |



数据层主要给业务逻辑层提供数据访问服务, 包括对于持久化数据的增, 删, 改, 查。

![]()
#### 5.4数据层的分解

##### 5.4.1 数据层模块的职责

数据层模块的职责如表所示:

| 模块          | 职责                                                |
|:------------|:--------------------------------------------------|
| staffDao    | 持久化数据库的接口, 提供集体载入、集体保存、增、删、改、查服务                  |
| staffMapper | 基于Mysql数据库的持久化数据库的接口, 提供集体载入、集体保存、<br />增、删、改、查服务 |
| accountDao    | 持久化数据库的接口, 提供集体载入、集体保存、增、删、改、查服务 |
| accountMapper | 基于Mysql数据库的持久化数据库的接口, 提供集体载入、集体保存、<br />增、删、改、查服务 |
| CreditSheetDao    | 持久化数据库的接口, 提供集体载入、集体保存、增、删、改、查服务 |
| CreditSheetMapper | 基于Mysql数据库的持久化数据库的接口, 提供集体载入、集体保存、<br />增、删、改、查服务 |
| establishmentDao    | 持久化数据库的接口, 提供集体载入、集体保存、增、删、改、查服务                  |
| establishmentMapper | 基于Mysql数据库的持久化数据库的接口, 提供集体载入、集体保存、<br />增、删、改、查服务 |
| paymentDao    | 持久化数据库的接口, 提供集体载入、集体保存、增、删、改、查服务                  |
| paymentMapper | 基于Mysql数据库的持久化数据库的接口, 提供集体载入、集体保存、<br />增、删、改、查服务 |
| saleSheetDao    | 持久化数据库的接口, 提供集体载入、集体保存、增、删、改、查服务                  |
| saleSheetMapper | 基于Mysql数据库的持久化数据库的接口, 提供集体载入、集体保存、<br />增、删、改、查服务 |
| saleReturnsSheetDao    | 持久化数据库的接口, 提供集体载入、集体保存、增、删、改、查服务                  |
| saleReturnsSheetSheetMapper | 基于Mysql数据库的持久化数据库的接口, 提供集体载入、集体保存、<br />增、删、改、查服务 |
| bonusDao    | 持久化数据库的接口, 提供集体载入、集体保存、增、删、改、查服务                  |
| bonusMapper | 基于Mysql数据库的持久化数据库的接口, 提供集体载入、集体保存、<br />增、删、改、查服务 |
| salaryDao         | 持久化数据库的接口, 提供集体载入、集体保存、增、删、改、查服务 |
| salarySheetMapper | 基于Mysql数据库的持久化数据库的接口, 提供集体载入、集体保存、<br />增、删、改、查服务 |
| PromoteDao | 持久化数据库的接口，提供集体载入，保存，增删改查服务 |
##### 5.4.2 数据层模块的接口规范

数据层模块的接口规范如表:
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">addStaff</td>
   	    <td>语法</td>
   	    <td>public int addStaff(StaffPO staffPO)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将员工信息添加进数据库</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">staffDao.updateSalary </td>
   	    <td>语法</td>
   	    <td> public int updateSalary(String role, Integer salary ) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该岗位薪资存储到数据库中</td>
   	</tr>
	<tr >
   	    <td rowspan="3">staffDao.clock_in  </td>
   	    <td>语法</td>
   	    <td> public int clockIn(ClockInPO clockInPO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td> service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工打卡信息存储到数据库中</td>
   	</tr>
   </table>

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">addAccount</td>
   	    <td>语法</td>
   	    <td>public void accountDao.addAccount(AccountPO accountPO)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入新账户的信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将信息添加进数据库</td>
   	</tr>
    <tr >
   	    <td rowspan="3">removeAccount</td>
   	    <td>语法</td>
   	    <td>public void accountDao.removeAccount(string accountName)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入待删除账户的名称</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将账户从数据库中删除</td>
   	</tr>
    <tr >
   	    <td rowspan="3">modifyAccount</td>
   	    <td>语法</td>
   	    <td>public void accountDao.modifyAccount(string oldName, string newName)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入待修改账户的名称和新名称</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将数据库中账户名称进行修改</td>
   	</tr>
 	<tr >
   	    <td rowspan="3">updateAccount</td>
   	    <td>语法</td>
   	    <td>public void updateAccount(string name, int amount) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>单据审批通过</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>修改账户余额</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectAccountByName</td>
   	    <td>语法</td>
   	    <td>public AccountPO selectAccountByName(string name) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>登入ADMIN账户</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回相应余额</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectAccount</td>
   	    <td>语法</td>
   	    <td>public List< AccountPO> selectAccounte() </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>登入ADMIN账户</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回所有账户信息</td>
   	</tr>
   </table>
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
    <tr >
   	    <td rowspan="3">getLatest</td>
   	    <td>语法</td>
   	    <td>CreditSheetPO getLatest()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>无</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回最新的收款单信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">addCreditSheet</td>
   	    <td>语法</td>
   	    <td>public void addCreditSheet(creditSheetPO creditSheetPO)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入新收款单的信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将信息添加进数据库</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">passCreditSheet</td>
   	    <td>语法</td>
   	    <td>public void passCreditSheet(string creditSheetId)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入待修改收款单的id</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>指定收款单信息修改为已通过</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectCreditSheetByState</td>
   	    <td>语法</td>
   	    <td>
   			public List&lt;CreditSheetPO&gt; selectCreditSheetByState(CreditSheetStatecreditSheetState)  			</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入指定状态</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回指定状态的收款单</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectAllCreditSheet</td>
   	    <td>语法</td>
   	    <td>public List&lt;CreditSheetPO&gt; selectAllCreditSheet()  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>无</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回所有收款单信息</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectCreditSheetByState</td>
   	    <td>语法</td>
   	    <td>List&lt;CreditSheetPO&gt; selectCreditSheetByState(CreditSheetState state)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>确定待选择的状态</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回所有处于该状态的收款单信息</td>
   	</tr>
    <tr >
   	    <td rowspan="3">updateCreditSheet</td>
   	    <td>语法</td>
   	    <td>int updateCreditSheet(String creditSheetId, CreditSheetState creditSheetState)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>确定待更改的收款单id</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>改变该收款单状态</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectCreditSheetById</td>
   	    <td>语法</td>
   	    <td>CreditSheetPO selectCreditSheetById(String creditSheetId)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>确定获取收款单的id</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回该收款单信息</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectCreditSheetContentById</td>
   	    <td>语法</td>
   	    <td>List&lt;CreditSheetContentPO&gt; selectCreditSheetContentById(String creditSheetId);</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>确定获取收款单的id</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回该收款单具体内容</td>
   	</tr>
 </table>
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">add*</td>
   	    <td>语法</td>
   	    <td>int add*(PO po)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储录入的信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">show*</td>
   	    <td>语法</td>
   	    <td>List< VO> show*()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回期初建账信息列表</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">select*</td>
   	    <td>语法</td>
   	    <td>List< VO> select*(VO vo)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回符合条件的期初建账信息列表</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">averagePurchase</td>
   	    <td>语法</td>
   	    <td>BigDecimal averagePurchase(String pid)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>添加期初建账商品信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回进货单中商品购买平均价格</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">averageRetail</td>
   	    <td>语法</td>
   	    <td>BigDecimal averageRetail(String pid)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>添加期初建账商品信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回销售单中商品售卖平均价格</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">selectCustomerByName</td>
   	    <td>语法</td>
   	    <td>CustomerPO selectCustomerByName(String name)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>添加期初建账客户</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回通过名字查询的客户，获取之前遗留的应收应付</td>
   	</tr>
   </table>
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">makePaymentSheet
    </td>
   	    <td>语法</td>
   	    <td>public Response makePaymentSheet(PaymentSheetVO paymentSheetVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储付款单，更改客户与银行账户信息</td>
   	</tr>
   </table>
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">SaleSheetDao
    </td>
   	    <td>语法</td>
   	    <td>public List< SaleSheetPO> selectSheetByParam(SaleDetailParamsVO saleDetailParamsVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回符合条件的销售单</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">SaleReturnsSheetDao
    </td>
   	    <td>语法</td>
   	    <td>public List< SaleReturnsSheetPO> selectSheetByParam(SaleDetailParamsVO saleDetailParamsVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回符合条件的销售退货单</td>
   	</tr>
   </table>
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">SalaryDao
    </td>
   	    <td>语法</td>
   	    <td>public SalaryPO findAllSalary(String staffName)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>计算员工本年度工资情况</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">makeBonus
    </td>
   	    <td>语法</td>
   	    <td>public int makeBonus(BonusPO bonusPO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储年终奖</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">updateBonus
    </td>
   	    <td>语法</td>
   	    <td>public int updateBonus(BonusPO bonusPO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>更新年终奖</td>
   	</tr>
   </table>
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">getLatest</td>
   	    <td>语法</td>
   	    <td>SalarySheetPO getLatest()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>无</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>获取最近一条工资单</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">save</td>
   	    <td>语法</td>
   	    <td>int save(SalarySheetPO toSave) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择要存的工资单</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该工资单存储到数据库中</td>
   	</tr>
    <tr >
   	    <td rowspan="3">findAll</td>
   	    <td>语法</td>
   	    <td> List< SalarySheetPO> findAll()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>无</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回所有工资单</td>
   	</tr>
    <tr >
   	    <td rowspan="3">findAllByState</td>
   	    <td>语法</td>
   	    <td> List< SalarySheetPO> findAllByState(SalarySheetState state)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择审核状态</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回该状态下的所有工资单</td>
   	</tr>
	<tr >
   	    <td rowspan="3">updateState</td>
   	    <td>语法</td>
   	    <td> int updateState(String SalarySheetId, SalarySheetState state)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>经理点击审核</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>更新审核状态</td>
   	</tr>
    <tr >
   	    <td rowspan="3">findOneById</td>
   	    <td>语法</td>
   	    <td>SalarySheetPO findOneById(String salarySheetId)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择单号</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回该单</td>
   	</tr>
    <tr>
   	    <td rowspan="3">findByDateAndStaffName</td>
   	    <td>语法</td>
   	    <td>List< SalarySheetPO> findByDateAndStaffName(String releaseDate, String staffName)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择日期和员工姓名</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回单</td>
   	</tr>
   </table>

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">PromoteDao.getLatest</td>
   	    <td>语法</td>
   	    <td>PromotePO getLatest()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>无</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回最近一条促销内容</td>
   	</tr>
   	<tr>
   	    <td rowspan="3">PromoteDao.save</td>
   	    <td>语法</td>
   	    <td>int save(PromotePO toSave)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>相同id的内容在数据库不存在</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>在数据库存入这个po</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">PromoteDao.findAll</td>
   	    <td>语法</td>
   	    <td>List< PromotePO> findAll()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>无</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回数据库所有促销的po</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">PromoteDao.findAllByTriggerType</td>
   	    <td>语法</td>
   	    <td>List< PromotePO> findAllByTriggerType(Integer promoteTrigger)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>无</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>根据促销触发策略返回所有促销单</td>
   	</tr>
</table>




#### 6.信息视角

##### 6.1 数据持久化对象

系统的PO类就是对应的相关的实体类, 在此只做简单的介绍。

- UserPO类包含用户的id,用户名、 密码以及权限
- StaffPO类包含员工id，姓名、性别、出生日期、手机、工作岗位、基本工资、岗位工资、岗位级别、薪资计算方式、薪资方法方式、工资卡账户薪资发放方式、扣税信息
- creditSheetPO类包含账户的名称以及余额
##### 6.2 数据库表

  数据库中包含User表、staff表、staff_checkup表、role表。
  数据库中包含User表、Commodity表、Customer表、Storage表、StorageLineItem表、staff表、clock_in表、account表。
  数据库中包含User表、Commodity表、Customer表、Storage表、StorageLineItem表、staff表、clock_in表、creditSheet表、creditSheet表。

## erp软件详细设计文档

| 版本号 |                                  |
| ------ | -------------------------------- |
| v0.1   | 添加了4.1.1~4.1.8                |
| v1.0   | 添加了4.1.9~4.1.11，并补充了图片 |



### 1.引言
### 2.产品概述
### 3.体系结构的概述
### 4.结构视角
#### 4.1业务逻辑的分解
##### 4.1.1 staff模块
（1）模块概述
staff模块承担的需求参加需求规格说明文档功能需求及相关非功能需求。

staff模块的职责与接口参见软件系统结构描述文档表。

（2）staff模块的设计如图所示
![staff模块各个类的设计](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-员工类图.png)
各个类的职责如下
（3）模块内部类的接口规范
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">addStaff</td>
   	    <td>语法</td>
   	    <td>public int addStaff(StaffVO staff) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入新员工的信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将员工信息添加进数据库并为其创建账户</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">staff_salary_amend</td>
   	    <td>语法</td>
   	    <td> public int updateSalary(Role role, Integer salary)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>制定岗位的新工资</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该工资信息存储到数据库中</td>
   	</tr>
	<tr >
   	    <td rowspan="3">staff_clock_in</td>
   	    <td>语法</td>
   	    <td> public int clockIn(String name)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td> 员工打卡</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工打卡信息存储到数据库中</td>
   	</tr>
   </table>
  


| 需要的服务                                                                     |                 |
|---------------------------------------------------------------------------|-----------------|
| staffDao.addStaff(StaffPO staffPO)                                        | 添加新的员工          |
| staffDao.updateSalary(String role, Integer salary) | 修改对应职位薪酬        |
| staffDao.clockIn(ClockInPO clockInPO)                                    | 在数据库中增加该员工的打卡信息 |
| userDao.createUser(UserPO userPO) | 创建新的账户        |

  

数据层模块的接口规范如表:
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">addStaff</td>
   	    <td>语法</td>
   	    <td>public int addStaff(StaffPO staffPO)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将员工信息添加进数据库</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">staffDao.updateSalary </td>
   	    <td>语法</td>
   	    <td> public int updateSalary(String role, Integer salary ) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该岗位薪资存储到数据库中</td>
   	</tr>
	<tr >
   	    <td rowspan="3">staffDao.clock_in  </td>
   	    <td>语法</td>
   	    <td> public int clockIn(ClockInPO clockInPO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td> service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工打卡信息存储到数据库中</td>
   	</tr>
   </table>


（4）业务逻辑层的动态模型
![添加员工顺序图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-增加员工顺序图.png)
![查询员工信息顺序图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-查看员工信息顺序图.png)
（5）业务逻辑层的设计原理 使用了委托式控制风格
##### 4.1.2 account模块

（1）模块概述
account模块承担的需求参加需求规格说明文档功能需求及相关非功能需求。

account模块的职责与接口参见软件系统结构描述文档表。

（2）account模块的设计如图所示
![account模块各个类的设计](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-Account_概念类图.png)
//todo
各个类的职责如下
（3）模块内部类的接口规范

<table>
   	   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">addAccount</td>
   	    <td>语法</td>
   	    <td>public Response addAccount(AccountVO accountVO) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>登入ADMIN账号</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将账户信息添加进数据库</td>
   	</tr>
    <tr >
   	    <td rowspan="3">removeAccount</td>
   	    <td>语法</td>
   	    <td>public Response removeAccount(AccountVO accountVO) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>登入ADMIN账号</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将账户信息从数据库中删除</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">modifyAccount</td>
   	    <td>语法</td>
   	    <td>public Response modifyAccount(string oldName, string newName) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>登入ADMIN账号</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将账户名称修改为新名称</td>
   	</tr>
    <tr >
   	    <td rowspan="3">updateAccount</td>
   	    <td>语法</td>
   	    <td>public Response updateAccount(string accountName, int amount) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>单据审批通过</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将相应账户资产修改</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectAccount</td>
   	    <td>语法</td>
   	    <td>public Response selectAccountByName(string accountName) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>登入ADMIN账户</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回相应余额</td>
   	</tr>
    <tr >
        <td rowspan="3">selectAccount</td>
        <td>语法</td>
        <td>public Response selectAccount() </td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>登入ADMIN账户</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所有账户信息</td>
    </tr>



| 需要的服务                                                   |                  |
| ------------------------------------------------------------ | ---------------- |
| accountDao.addAccount(AccountPO accountPO)                   | 添加新的账户     |
| accountDao.removeAccount(string accountName)                 | 删除账户         |
| accountDao.modifyAccount(string accountName, string newName) | 修改账户名称     |
| accountDao.updateAccount(string accountName, int amount)     | 修改账户余额     |
| accountDao.selectAccountByName(string accountName)           | 查找账户余额     |
| accountDao.selectAccount()                                   | 查找所有账户名称 |

数据层模块的接口规范如表:

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">addAccount</td>
   	    <td>语法</td>
   	    <td>public void accountDao.addAccount(AccountPO accountPO)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入新账户的信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将信息添加进数据库</td>
   	</tr>
    <tr >
   	    <td rowspan="3">removeAccount</td>
   	    <td>语法</td>
   	    <td>public void accountDao.removeAccount(string accountName)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入待删除账户的名称</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将账户从数据库中删除</td>
   	</tr>
    <tr >
   	    <td rowspan="3">modifyAccount</td>
   	    <td>语法</td>
   	    <td>public void accountDao.modifyAccount(string oldName, string newName)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入待修改账户的名称和新名称</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将数据库中账户名称进行修改</td>
   	</tr>
 	<tr >
   	    <td rowspan="3">updateAccount</td>
   	    <td>语法</td>
   	    <td>public void updateAccount(string name, int amount) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>单据审批通过</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>修改账户余额</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectAccountByName</td>
   	    <td>语法</td>
   	    <td>public AccountPO selectAccountByName(string name) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>登入ADMIN账户</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回相应余额</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectAccount</td>
   	    <td>语法</td>
   	    <td>public List< AccountPO> selectAccounte() </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>登入ADMIN账户</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回所有账户信息</td>
   	</tr>
 </table>


（4）业务逻辑层的动态模型
![账户顺序图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-Account_顺序图.png)

（5）业务逻辑层的设计原理
使用了委托式控制风格
##### 4.1.3 creditSheet模块

（1）模块概述
creditSheet模块承担的需求参加需求规格说明文档功能需求及相关非功能需求。

creditSheet模块的职责与接口参见软件系统结构描述文档表。

（2）credit模块的设计如图所示
![credit模块各个类的设计](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-Credit_概念类图.png)
//todo
各个类的职责如下
（3）模块内部类的接口规范

| 需要的服务                                                   |                                |
| ------------------------------------------------------------ | ------------------------------ |
| creditSheetDao.getLatest()                                   | 返回最新的收款单信息           |
| creditSheetDao.addCreditSheet(creditSheetPO creditSheetPO)   | 将信息添加进数据库             |
| creditSheetDao.passCreditSheet(string creditSheetId)         | 指定收款单信息修改为已通过     |
| creditSheetDao.selectCreditSheetByState(CreditSheetStatecreditSheetState) | 返回指定状态的收款单           |
| creditSheetDao.selectAllCreditSheet()                        | 返回所有收款单信息             |
| creditSheetDao.selectCreditSheetByState(CreditSheetState state) | 返回所有处于该状态的收款单信息 |
| creditSheetDao.updateCreditSheet(String creditSheetId, CreditSheetState creditSheetState) | 改变该收款单状态               |
| creditSheetDao.selectCreditSheetById(String creditSheetId)   | 返回该收款单信息               |
| creditSheetDao.selectCreditSheetContentById(String creditSheetId) | 返回该收款单具体内容           |

数据层模块的接口规范如表:

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
    <tr >
   	    <td rowspan="3">getLatest</td>
   	    <td>语法</td>
   	    <td>CreditSheetPO getLatest()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>无</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回最新的收款单信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">addCreditSheet</td>
   	    <td>语法</td>
   	    <td>public void addCreditSheet(creditSheetPO creditSheetPO)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入新收款单的信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将信息添加进数据库</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">passCreditSheet</td>
   	    <td>语法</td>
   	    <td>public void passCreditSheet(string creditSheetId)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入待修改账户的id</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>指定收款单信息修改为已通过</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectCreditSheetByState</td>
   	    <td>语法</td>
   	    <td>
   			public List&lt;CreditSheetPO&gt; selectCreditSheetByState(CreditSheetStatecreditSheetState)  			</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入指定状态</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回指定状态的收款单</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectAllCreditSheet</td>
   	    <td>语法</td>
   	    <td>public List&lt;CreditSheetPO&gt; selectAllCreditSheet()  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>无</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回所有收款单信息</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectCreditSheetByState</td>
   	    <td>语法</td>
   	    <td>List&lt;CreditSheetPO&gt; selectCreditSheetByState(CreditSheetState state)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>确定待选择的状态</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回所有处于该状态的收款单信息</td>
   	</tr>
    <tr >
   	    <td rowspan="3">updateCreditSheet</td>
   	    <td>语法</td>
   	    <td>int updateCreditSheet(String creditSheetId, CreditSheetState creditSheetState)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>确定待更改的收款单id</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>改变该收款单状态</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectCreditSheetById</td>
   	    <td>语法</td>
   	    <td>CreditSheetPO selectCreditSheetById(String creditSheetId)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>确定获取收款单的id</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回该收款单信息</td>
   	</tr>
    <tr >
   	    <td rowspan="3">selectCreditSheetContentById</td>
   	    <td>语法</td>
   	    <td>List&lt;CreditSheetContentPO&gt; selectCreditSheetContentById(String creditSheetId);</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>确定获取收款单的id</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回该收款单具体内容</td>
   	</tr>
 </table>

（4）业务逻辑层的动态模型
![credit顺序图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-Credit_顺序图.png)

（5）业务逻辑层的设计原理
使用了委托式控制风格

##### 4.1.4 finatial_staff模块
（1）模块概述
establishment模块承担的需求参加需求规格说明文档功能需求及相关非功能需求。

establishment模块的职责与接口参见软件系统结构描述文档表。

（2）establishment模块的设计如图所示
![establishment模块各个类的设计](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-期初建账类图.png)
//todo
各个类的职责如下
（3）模块内部类的接口规范
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">addCategory</td>
   	    <td>语法</td>
   	    <td>int addCategory(CategoryVO categoryVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>获取分类信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储期初分类</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">addProduct</td>
   	    <td>语法</td>
   	    <td>int addProduct(ProductInfoVO productInfoVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>获取商品信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储期初商品</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">addCustomer</td>
   	    <td>语法</td>
   	    <td>int addCustomer(CustomerVO customerVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>获取客户信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储期初客户</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">addAccount</td>
   	    <td>语法</td>
   	    <td>int addAccount(AccountVO accountVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>获取账户信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储期初账户</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">initializeDataBase</td>
   	    <td>语法</td>
   	    <td>void initializeDataBase()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>录入全部期初建账信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>用期初建账信息初始化数据库</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">showCategory</td>
   	    <td>语法</td>
   	    <td>List< CategoryVO> showCategory()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的分类信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">showProduct</td>
   	    <td>语法</td>
   	    <td>List< ProductInfoVO> showProduct()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的商品信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">showCustomer</td>
   	    <td>语法</td>
   	    <td>List< CustomerVO> showCustomer()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的客户信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">showAccount</td>
   	    <td>语法</td>
   	    <td>List< AccountVO> showAccount()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的账户信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">selectCategory</td>
   	    <td>语法</td>
   	    <td>List< CategoryVO> selectCategory(CategoryVO categoryVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的符合条件的分类信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">selectProduct</td>
   	    <td>语法</td>
   	    <td>List< ProductInfoVO> selectProduct(ProductInfoVO productInfoVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的符合条件的商品信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">selectCustomer</td>
   	    <td>语法</td>
   	    <td>List< CustomerVO> selectCustomer(CustomerVO customerVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的符合条件的客户信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">selectAccount</td>
   	    <td>语法</td>
   	    <td>List< AccountVO> selectAccount(AccountVO accountVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>期初建账完成</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>展示期初建账的符合条件的账户信息</td>
   	</tr>
   </table> 

| 需要的服务                                                                     |                 |
|---------------------------------------------------------------------------|-----------------|
| establishmentDao.add*(PO po)              | 添加期初建账信息 |
| establishmentDao.show*()                  | 无条件查询 |
| establishmentDao.select*(PO po)           | 有条件查询 |
| categoryService.createCategory()          | 添加分类 |
| productService.createProduct()            | 添加商品 |
| customerService.addCustomer(customerPO)   | 添加客户 |
| accountService.createAccount()            | 添加账户 |
| categoryDao.findByCategoryId()            | 通过id获取分类 |
| establishmentDao.averagePurchase()        | 获得上半年平均进价 |
| establishmentDao.averageRetail()          | 获得上半年平均零售价 |
| establishmentDao.selectCustomerByName()   | 通过名字获得客户 |

数据层模块的接口规范如表:
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">add*</td>
   	    <td>语法</td>
   	    <td>int add*(PO po)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储录入的信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">show*</td>
   	    <td>语法</td>
   	    <td>List< VO> show*()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回期初建账信息列表</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">select*</td>
   	    <td>语法</td>
   	    <td>List< VO> select*(VO vo)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回符合条件的期初建账信息列表</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">averagePurchase</td>
   	    <td>语法</td>
   	    <td>BigDecimal averagePurchase(String pid)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>添加期初建账商品信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回进货单中商品购买平均价格</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">averageRetail</td>
   	    <td>语法</td>
   	    <td>BigDecimal averageRetail(String pid)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>添加期初建账商品信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回销售单中商品售卖平均价格</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">selectCustomerByName</td>
   	    <td>语法</td>
   	    <td>CustomerPO selectCustomerByName(String name)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>添加期初建账客户</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回通过名字查询的客户，获取之前遗留的应收应付</td>
   	</tr>
   </table>

（4）业务逻辑层的动态模型
下图表明了制定新的促销策略时系统的协作顺序。
![顺序图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-期初建账顺序图.png)

（5）业务逻辑层的设计原理
使用了委托式控制风格
4.1.1 staff模块

（1）模块概述 staff模块承担的需求参加需求规格说明文档功能需求及相关非功能需求。

staff模块的职责与接口参见软件系统结构描述文档表。

（2）staff模块的设计如图所示  //todo 各个类的职责如下 （3）模块内部类的接口规范

数据层模块的接口规范如表:

（4）业务逻辑层的动态模型 下图表明了添加新员工时系统的协作顺序。 ![添加新员工顺序图]()

（5）业务逻辑层的设计原理 使用了委托式控制风格
##### 4.1.5 manage_proc
1）模块概述 manage_proc模块承担的需求参加需求规格说明文档功能需求及相关非功能需求。

manage_proc模块的职责与接口参见软件系统结构描述文档表。

（2）manage_proc模块的设计如图所示  

![manage_proc类图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-Manage_proc_概念类图.png)
（4）业务逻辑层的动态模型 下图表明了添加新员工时系统的协作顺序。 ![manage_procs顺序图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7Manage_proc_顺序图.png)

##### 4.1.6 payment模块
（1）模块概述
payment模块承担的需求参加需求规格说明文档功能需求及相关非功能需求。

payment模块的职责与接口参见软件系统结构描述文档表。

（2）payment模块的设计如图所示
//todo
各个类的职责如下
（3）模块内部类的接口规范
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">makePaymentSheet
    </td>
   	    <td>语法</td>
   	    <td>public Response makePaymentSheet(PaymentSheetVO paymentSheetVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>获取付款单内容</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储付款单，更改客户与银行账户信息</td>
   	</tr>
   </table> 

| 需要的服务                                                                     |                 |
|---------------------------------------------------------------------------|-----------------|
| paymentDao.makeSheet(PaymentSheetVO paymentSheetVO)                                      | 添加新的付款单          |


数据层模块的接口规范如表:
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">makePaymentSheet
    </td>
   	    <td>语法</td>
   	    <td>public Response makePaymentSheet(PaymentSheetVO paymentSheetVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储付款单，更改客户与银行账户信息</td>
   	</tr>
   </table>

（4）业务逻辑层的动态模型

##### 4.1.7 saleDetail模块
（1）模块概述
saleDetail模块承担的需求参加需求规格说明文档功能需求及相关非功能需求。

saleDetail模块的职责与接口参见软件系统结构描述文档表。

（2）saleDetail模块的设计如图所示
![saleDetail模块各个类的设计](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-销售明细表类图.png)
//todo
各个类的职责如下
（3）模块内部类的接口规范
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">showSaleDetail
    </td>
   	    <td>语法</td>
   	    <td>public Response showSaleDetail(SaleDetailParamVO saleDetailParamVo) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>获取有效的筛选条件</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回销售明细表</td>
   	</tr>
   </table> 

| 需要的服务                                                                     |                 |
|---------------------------------------------------------------------------|-----------------|
| saleSheetDao.selectSheetByParam(saleDetailParamsVO)                 | 获得销售单          |
| saleSheetDao.findContentBySheetId(saleSheetId)                     | 获得销售单内容          |
| saleReturnsSheetDao.selectSheetByParam(saleDetailParamsVO)            | 获得销售退货单          |
| saleReturnsSheetDao.findContentBySaleReturnsSheetId(saleReturnsSheetId) | 获得销售退货单内容          |
| productService.getOneProductByPid(pid)                             | 根据id查询商品信息           |


数据层模块的接口规范如表:
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">SaleSheetDao
    </td>
   	    <td>语法</td>
   	    <td>public List< SaleSheetPO> selectSheetByParam(SaleDetailParamsVO saleDetailParamsVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回符合条件的销售单</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">SaleReturnsSheetDao
    </td>
   	    <td>语法</td>
   	    <td>public List< SaleReturnsSheetPO> selectSheetByParam(SaleDetailParamsVO saleDetailParamsVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回符合条件的销售退货单</td>
   	</tr>
   </table>
（4）业务逻辑层的动态模型

![顺序图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-销售明细表顺序图.png)

（5）业务逻辑层的设计原理
##### 4.1.8 bonus模块
（1）模块概述
bonus模块承担的需求参加需求规格说明文档功能需求及相关非功能需求。

bonus模块的职责与接口参见软件系统结构描述文档表。

（2）bonus模块的设计如图所示
![bonus模块各个类的设计](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-年终奖类图.png)
//todo
各个类的职责如下
（3）模块内部类的接口规范
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">showPerformance
    </td>
   	    <td>语法</td>
   	    <td>public List< BonusVO > showTodoBonus()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td></td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回员工表现</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">makeBonus
    </td>
   	    <td>语法</td>
   	    <td>public boolean makeBonus(List< BonusVO> bonusVOS)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>总经理根据员工表现以及工资情况制定完成年终奖</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储年终奖信息</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">updateBonus
    </td>
   	    <td>语法</td>
   	    <td>public int updateBonus(BonusVO bonusVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>更改年终奖</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>修改年终奖信息</td>
   	</tr>
   </table> 

| 需要的服务                                                                     |                 |
|---------------------------------------------------------------------------|-----------------|
| salaryDao.findAll()                                      | 查看所有员工          |
| salaryDao.findAllSalary()                                      | 查看员工本年度工资情况          |
| bonusDao.makeBonus(bonusPO)                                     | 存储年终奖          |
| bonusDao.updateOneBonus(bonusPO)                           | 更改年终奖           |


数据层模块的接口规范如表:
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">SalaryDao
    </td>
   	    <td>语法</td>
   	    <td>public SalaryPO findAllSalary(String staffName)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>计算员工本年度工资情况</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">makeBonus
    </td>
   	    <td>语法</td>
   	    <td>public int makeBonus(BonusPO bonusPO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>存储年终奖</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">updateBonus
    </td>
   	    <td>语法</td>
   	    <td>public int updateBonus(BonusPO bonusPO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>service调用</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>更新年终奖</td>
   	</tr>
   </table>
（4）业务逻辑层的动态模型

![顺序图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-年终奖顺序图.png)

（5）业务逻辑层的设计原理
使用了委托式控制风格



##### 4.1.9经营情况表模块

（1）模块概述
经营情况表模块承担的需求参加需求规格说明文档功能需求及相关非功能需求。

经营情况表模块的职责与接口参见软件系统结构描述文档表。

（2）经营情况表模块的设计如图所示
![经营情况表](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-经营情况表类.jpg)
//todo
各个类的职责如下
（3)模块内部类的接口规范

ManageCondController的接口规范

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">makeManageCondInquiry</td>
   	    <td>语法</td>
   	    <td>public Response makeManageCondInquiry(@RequestBody BalanceTableVO balanceTableVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入起始日期信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回一个Response新的完整的VO包含折算后收入、折让、支出、利润信息</td>
   	</tr>
</table>

| 需要的服务                                                   |                                    |
| ------------------------------------------------------------ | ---------------------------------- |
| manageCondService.makeBalanceInquiry（@RequestBody BalanceTableVO balanceTableVO） | 根据含有起止日期的VO来返回完整信息 |



ManageCondService的接口规范

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">makeBalanceInquiry</td>
   	    <td>语法</td>
   	    <td>public BalanceTableVO makeBalanceInquiry(BalanceTableVO balanceTableVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入起始日期信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回一个新的完整的VO包含折算后收入、折让、支出、利润信息</td>
   	</tr>
</table>

| 需要的服务                                      |                            |
| ----------------------------------------------- | -------------------------- |
| manageProcService.searchSale(manageProcVO)      | 根据起止日期寻找销售类单据 |
| manageProcService.searchFinancial(manageProcVO) | 根据起止日期寻找财务类单据 |
| manageProcService.searchPurchase(manageProcVO)  | 根据起止日期寻找进货类单据 |
| manageProcService.searchInventory(manageProcVO) | 根据起止日期寻找库存类单据 |




（4）业务逻辑层的动态模型
![添加新员工顺序图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-经营情况表顺序图.jpg)

（5）业务逻辑层的设计原理
使用了委托式控制风格


##### 4.1.10 工资模块
（1）模块概述
工资模块承担的需求参加需求规格说明文档功能需求及相关非功能需求。

工资模块的职责与接口参见软件系统结构描述文档表。

（2）工资模块的设计如图所示
![工资](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-工资类图.jpg)

各个类的职责如下
（3)模块内部类的接口规范



SalaryController模块的接口规范

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">SalaryController.makeAllSalarySheets</td>
   	    <td>语法</td>
   	    <td>public Response makeAllSalarySheets(UserVO userVO, @RequestParam(value = "date") String date) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>操作员已经登录，并已经输入日期信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将所有的这天的工资单存入数据库内</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">SalaryController.approval</td>
   	    <td>语法</td>
   	    <td> public Response approval(@RequestParam("salarySheetId") String salarySheetId, @RequestParam("state") SalarySheetState state)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择员工类型与新的工资</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工工资信息存储到数据库中</td>
   	</tr>
	<tr >
   	    <td rowspan="3">SalaryController.showSheetByState</td>
   	    <td>语法</td>
   	    <td>public Response showSheetByState(@RequestParam(value = "state", required = false) SalarySheetState state)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td> 员工点击打卡</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工打卡信息存储到数据库中</td>
   	</tr>
	<tr >
   	    <td rowspan="3">SalaryController.findBySheetId</td>
   	    <td>语法</td>
   	    <td>public Response findBySheetId(@RequestParam(value = "id") String id)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入单号</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回单号对应的单据</td>
   	</tr>
   </table>


| 需要的服务                                                                     |                 |
|---------------------------------------------------------------------------|-----------------|
| Response.buildSuccess(Object result) | 当成功时传入结果返回             |
| salaryService.makeAllSalarySheets(UserVO userVO, String date) | 创建当天的工资单并返回该天所有单 |
| salaryService.approval(String salarySheetId, BaseEnum state) | 根据单据号来审批 |
| salaryService.getSheetByState(BaseEnum state) | 根据审批状态来返回所有工资单     |
| salaryService.getSheetById(String id) | 根据单据号来返回单据 |


SalaryService模块的接口规范

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">makesheet</td>
   	    <td>语法</td>
   	    <td>public SalarySheetVO makeSheet(UserVO userVO, SalarySheetVO salarySheetVO) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入工资单信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将工资单信息添加进数据库，并返回一个新的完整的VO</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">approval</td>
   	    <td>语法</td>
   	    <td> public void approval(String salarySheetId, SalarySheetState state)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择工资单单号和审批状态</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>改变审批状态，成功则进行操作</td>
   	</tr>
	<tr >
   	    <td rowspan="3">getSheetByState</td>
   	    <td>语法</td>
   	    <td> public List< SalarySheetVO> getSheetByState(SalarySheetState state)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>点击对应的状态</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回该状态下的工资单</td>
   	</tr>
    	<tr >
   	    <td rowspan="3">makeAllSalarySheets</td>
   	    <td>语法</td>
   	    <td> public List< SalarySheetVO> makeAllSalarySheets(UserVO userVO, String date)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择发放日期</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>制定该日下的所有工资单，并存入数据库</td>
   	</tr>
   	</tr>
    	<tr >
   	    <td rowspan="3">getSheetById</td>
   	    <td>语法</td>
   	    <td>SalarySheetVO getSheetById(String salarySheetId)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择工资单单据号</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回该单据号对应的单据</td>
   	</tr>
   </table>

（4）业务逻辑层的动态模型
下图表明了添加新员工时系统的协作顺序。
![添加新员工顺序图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-工资顺序图.jpg)

（5）业务逻辑层的设计原理
使用了委托式控制风格

##### 4.1.11 促销模块

（1）模块概述
促销模块承担的需求参加需求规格说明文档功能需求及相关非功能需求。

促销模块的职责与接口参见软件系统结构描述文档表。

（2）promote模块的设计如图所示
![类图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-促销类图.jpg)

各个类的职责如下
（3)模块内部类的接口规范

PromoteController的接口规范

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">createPromotion</td>
   	    <td>语法</td>
   	    <td>public Response createPromotion(UserVO userVO, @RequestBody PromoteVO promoteVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>登录，并输入促销信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回一个Response</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">showPromotion</td>
   	    <td>语法</td>
   	    <td>public Response showPromotion()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>登录</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回一个Response，包含所有的promotionvo</td>
   	</tr>
</table>



| 需要的服务                                        |                          |
| ------------------------------------------------- | ------------------------ |
| promoteService.createPromotion(userVO, promoteVO) | 制定促销策略并存入数据库 |
| promoteService.showAllPromotions()                | 返回所有的促销策略信息   |



PromoteService的接口规范

<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">createPromotion</td>
   	    <td>语法</td>
   	    <td>Response createPromotion(UserVO userVO, PromoteVO promoteVO)</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入用户信息和促销信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>返回一个Response</td>
   	</tr>
       	<tr >
   	    <td rowspan="3">showAllPromotions</td>
   	    <td>语法</td>
   	    <td>List< PromoteVO> showAllPromotions()</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>无</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>含有所有促销信息的list</td>
   	</tr>
    <tr >
   	    <td rowspan="3">promote</td>
   	    <td>语法</td>
   	    <td>SaleSheetPO promote(SaleSheetPO saleSheetPO, List< SaleSheetContentPO> saleSheetContentPOs);</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>传入待应用销售策略的销售单和其内容</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>补充完整的销售单，符合条件时会开具赠送单</td>
   	</tr>
</table>

| 需要的服务                            |                              |
| ------------------------------------- | ---------------------------- |
| promoteDao.save(promotePO)            | 将促销信息存入数据库         |
| promoteDao.findAll()                  | 返回所有促销信息             |
| customerDao.findOneById(id)           | 根据id返回客户               |
| promoteDao.findAllByTriggerType(type) | 根据触发类型返回所有促销信息 |

（4）业务逻辑层的动态模型
下图表明了制定促销策略时系统的协作顺序。
![顺序图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/201250180-lab7-促销顺序图.jpg)

（5）业务逻辑层的设计原理
使用了委托式控制风格