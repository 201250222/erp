# lab7文档
## erp系统用例文档
### 1.引言
### 2.用例列表
| 参与者    | 用例                                 |
|--------|------------------------------------|
| 人力资源人员 | 1.员工管理 </br> 2.员工打卡 </br> 3.薪酬规则制定 |
### 3.详细用例描述
| **id**      | 1                                                                                      |
|-------------|----------------------------------------------------------------------------------------|
| **名称**      | 员工管理                                                                                   |
| **创建者**     | 张翼                                                                                     |  
| **最后一次更新者** | 张翼                                                                                     |
| **创建日期**    | 2022.6.26                                                                              |  
| **最后更新日期**  | 2022.6.27                                                                              |
| **参与者**     | 人力资源人员                                                                                 |
| **触发条件**    | 新员工入职或老员工信息发生变更                                                                        |
| **前置条件**    | 人力资源人员身份已经被识别                                                                          |
| **优先级**     | 高                                                                                      |
| **正常流程**    | 1.如果是新员工入职，在员工管理页面点击添加员工</br> 2.输入员工信息，点击确认。 </br> 3.系统返回创建是否成功，如果创建成功，会为该员工提供账号 </br> |
| **扩展流程**    | 1a.输入非法员工信息 </br> 2.系统提示错误并拒绝操作                                                        |
| **特殊需求**    ||

|   **id**    |            2             |     
|:-----------:|:------------------------:|
|   **名称**    |           员工打卡           |
|   **创建者**   |            张翼            | 
| **最后一次更新者** |            张翼            |
|  **创建日期**   |        2022.6.26         | 
| **最后更新日期**  |        2022.6.27         |
|   **参与者**   |           所有员工           |
|  **触发条件**   |           员工打卡           |
|  **前置条件**   |        员工身份已经被识别         |
|   **优先级**   |            高             |
|  **正常流程**   | 1.点击打卡按钮</br> 2.系统返回操作结果 |
|  **扩展流程**   |                          |
|  **特殊需求**   ||

| **id**      | 3                                                           |
|-------------|-------------------------------------------------------------|
| **名称**      | 员工薪酬规则制定                                                    |
| **创建者**     | 张翼                                                          | 
| **最后一次更新者** | 张翼                                                          |
| **创建日期**    | 2022.6.26                                                   | 
| **最后更新日期**  | 2022.6.27                                                   |
| **参与者**     | 人力资源人员                                                      |
| **触发条件**    | 制定员工薪酬                                                      |
| **前置条件**    | 人力资源人员身份已经被识别                                               |
| **优先级**     | 高                                                           |
| **正常流程**    | 1.在员工薪酬管理列表中寻找对应员工</br> 2.点击该员工的管理按钮 </br> 3.修改员工薪酬信息 </br> |
| **扩展流程**    |                                                             |
| **特殊需求**    | 1a.输入非法薪资信息 </br> 2.系统提示错误并拒绝操作                             |

## erp软件需求规格说明文档
### 1.引言
#### 1.1目的
本文档描述了ERP系统的销售模块的功能需求与非功能需求，后续软件系统的实现与验证都基于此文档
#### 1.2范围
员工管理模块是帮助人力资源人员进行员工管理
#### 1.3参考文献
《软件工程与技术（卷二）》
### 2.总体描述
#### 2.1商品前景
##### 2.1.1背景
一民营企业专业从事灯具开关行业，是某著名开关品牌的南京地区总代理，主要在南京负责品牌的推广及项目的落地销售、分销的批发等工作，
服务对象包括项目业主、施工单位、分销商、设计院、终端用户等。
现公司规模扩大，企业业务量、办公场所、员工数都发生增长，为适应新的环境，提高工作效率和用户满意度，该公司聘南鲸软件科技公司开发一套 ERP 系统。该系统主要包括：库存管理、销售管理、财务管理、人事管理和企业经营管理。
销售模块就是为了满足销售管理业务开发的，它包括一个数据集中服务器和多个客户端，数据集中服务器储存维护所有数据，客户端帮助销售人员完成日常工作，二者通过实时通信完成数据交换
##### 2.1.2业务需求
系统上线运行六个月后，碱少积压的库存，增加销售额、提高工作效率，为经理的决策做支持。
#### 2.2商品功能
SF1：管理员工信息
SF2：员工打卡
SF3：制定员工薪酬
#### 2.3用户特征
人力资源人员：1 到 2 名。办公信息化系统较强。进行员工管理 。
#### 2.4约束
CON1：系统运行在windows系统或mac系统上
CON2：系统使用web界面
### 3.详细需求描述
#### 3.2 功能需求
##### 3.2.1 员工管理
###### 3.2.1.1 特性描述
人力资源人员登录系统后，在员工管理页面点击增加员工，输入员工信息，完成员工入职，并为员工提供账号。
###### 3.2.1.2刺激/响应序列
刺激：人力资源人员点击员工入职按钮。
响应：系统弹出员工信息登记表。
刺激：人力资源人员登记员工信息完成后，点击确定。
响应：系统检查信息合法性，如不合法，显示错误信息，如果合法，创建员工。
刺激：新员工入职
响应：系统为该员工提供默认账号
###### 3.2.1.3相关功能需求
| 编号                                                                              | 需求描述                                                                                                                      |
|:--------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------|
| staff.add.Start<br/> staff.add.Input<br/>staff.add.check<br/> sale.add.complete | 点击员工入职按钮后，允许人力资源人员添加新员工<br/>系统允许用户登记新员工的信息<br/>在登记完员工信息点击提交后，系统要检查输入信息合法性，如果不合法，需要弹出错误信息。信息无误则返回正确 <br/> 在入职完成后，系统为员工提供账号 |
##### 3.2.2 员工薪酬制定
###### 3.2.2.1 特性描述
人力资源人员在登录系统后，为不同级别员工制定对应的薪酬
##### 3.2.2.2 刺激响应序列
刺激：人力资源人员进入员工管理界面。
响应：系统显示所有员工信息，包括级别与当前薪酬。
刺激：人力资源人员点击员工对应的薪酬修改按钮。
响应：系统提供输入框，使得人力资源人员修改员工薪酬。
刺激：人力资源人员修改完成后，点击确认。
响应：系统修改该员工的薪酬。
###### 3.2.2.3相关功能需求
| 编号                                                                                                                  | 需求描述                                                                                             |
|:--------------------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------|
| staff.salary.show<br/> staff.salary.amend.start<br/>staff.salary.amend.input<br/> staff.salary.amend.start.complete | 人力资源人员进入员工管理界面后，显示该员工的级别与薪酬<br/人力资源人员点击某员工的薪酬修改<br/>人力资源人员输入该员工新的薪酬 <br/> 人力资源人员点击确认后，系统修改该员工的薪酬 |
##### 3.2.3 员工打卡
###### 3.2.2.1 特性描述
员工登录系统，进行每日打卡
##### 3.2.2.2 刺激响应序列
刺激：员工登录系统点击打卡按钮
响应：系统完成员工当日打卡
###### 3.2.2.3相关功能需求
| 编号             | 需求描述               |
|:---------------|:-------------------|
| staff.clock_in | 员工登录系统，点击打卡按钮，完成打卡 |
#### 3.3非功能需求
##### 3.3.1安全性
Safety1: 系统只允许经过验证和授权的用户访问
Safety2 系统应该按照用户身份验证用户的访问权限
##### 3.3.2可维护性
##### 3.3.3易用性
##### 3.3.4可靠性
##### 3.3.3.5业务规则
##### 3.3.6约束
#### 3.4数据需求
##### 3.4.1数据定义
IC1: 系统需要存储员工信息（员工id，姓名、性别、出生日期、手机、工作岗位、基本工资、岗位工资、岗位级别、薪资计算方式、薪资方法方式、工资卡账户薪资发放方式、扣税信息）。
IC2: 系统需要存储员工打卡信息（日期，员工id，打卡）
IC2：系统需要存储员工账号信息（id，name，password，role）
##### 3.4.2默认数据
默认数据为以下情况：
·员工入职后提供默认账号
Default1：员工默认账号，name为姓名拼音，密码为123456。
##### 3.4.2数据格式要求
Format1 员工工资保留为正整数（向上取整）单位为元
Format2 日期的格式为yyyy-mm-dd。

## ERP系统软件体系结构描述⽂档
### 1.引言
#### &emsp;&emsp; 1.1编制目的
&emsp;&emsp;本报告详细完成对ERP系统的概要设计，达到知道详细设计和开发的目的，同时实现和测试人员及用户的沟通。  
&emsp;&emsp;本报告面向开发人员、测试人员、以及最终用户编写，是了解系统的导航。
#### &emsp;&emsp; 1.2词汇表
| 词汇名称               | 词汇含义               | 备注                |
|--------------------|--------------------|-------------------|
| ERP                | 企业资源管理计划           | .......           |
| ......             | ......             | ......            |  
#### &emsp;&emsp; 1.3参考资料
### 2.产品概述
&emsp;&emsp;参考ERP系统用例文档和软件需求规格说明中对产品的概况和描述。
### 3.逻辑视角
&emsp;&emsp;ERP系统中，选择了分层体系结构风格，将系统分为三层（展示层、业务逻辑层、数据层）能够很好地示意整个高层抽象。展示层包含GUI界面的实现，业务逻辑层包含业务逻辑的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑视角和逻辑设计方案如下图所示。  
![包图逻辑表达视角]()
//todo
![软件体系结构逻辑设计方案]()
//todo
### 4.组合视角
#### &emsp;&emsp; 4.1开发包图
| 开发（物理）包          | 依赖的其他开发包               | 
|------------------|------------------------|
| staffui          | staffcontroller，vue,vo |
| staffcontroller  | vo,staffservice,po     |
| staffservice     | staffserviceimpl ,po   |
| staffserviceimpl | staffdao,po            |
| staffdao         | staffMapper,po         | 
| staffMapper      | po,databaseutility     |
| vo               |                        |
| po               |                        |
| vue              |                        |
| databaseutility  | Mybatis                |
![客户端开发包图]()  
//todo
![服务器端开发包图]()
//todo

#### 4.2 运行时进程

在ERP系统中会有一个服务器端进程和多个客户端进程，相应的进程图如下图所示。结合部署图，客户端进程是在客户端机器上运行，服务器端程序在服务器端极其上运行。
![图4.2]()
//todo
#### 4.3 物理部署

ERP系统中客户端构建是放在客户端机器上，服务器端构件放在服务器端机器上。在客户端节点上，需要部署JDK8。

### 5 接口视角

#### 5.1 模块的职责

客户端模块和服务端模块视图如下图所示。
![图5.1.1]()
//todo

| 层     | 职责                      |
|-------|-------------------------|
| 用户界面层 | 用户在界面进行相应操作             |
| 业务逻辑层 | 对于用户的输入进行相应的逻辑处理        |
| 数据层   | 将逻辑处理的结果存入到数据库或读取数据库的内容 |

每一层只是使用下方直接接触的层。层与层之间仅仅是通过接口的调用实现的。层与层之间的接口调用如下。

| 接口              | 服务调用方 | 服务提供方 |
|-----------------|-------|-------|
| staffcontroller | 展示层   | 业务逻辑层 |
| staffDao        | 业务逻辑层 | 数据层   |

#### 5.2用户界面层的分解
![图5.1.2]()
//todo
用户界面层的分解

根据需求，系统存在25个用户界面：登录界面、管理员主页面、总经理主页面、库存管理人员主页面、进货销售人员主页面、销售经理主页面、财务人员主页面、人力资源人员主页面、账户新建和管理页面、商品管理、商品分类管理、库存管理、客户管理与查询、销售进退货、审批单据、设定薪资信息、审核工资单、登记员工入职信息、账户管理、制定单据、查看经营历程表、查看经营情况表、查看销售明细表、制定促销策略。页面跳转如图所示。


#### 5.3业务逻辑层的分解

![]()
//todo
##### 5.3.1 业务逻辑层模块的职责

| 模块    | 职责               |
|-------|------------------|
| staff | 实现员工入职，薪酬制定，员工打卡 |

##### 5.3.2业务逻辑层模块的接口规范
**staff模块的接口规范**
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">addStaff</td>
   	    <td>语法</td>
   	    <td>public Response addStaff(StaffVO staffVo) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入新员工的信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将员工信息添加进数据库</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">staff_salary_amend</td>
   	    <td>语法</td>
   	    <td> public Response amendStaffSalary(StaffType type,Integer id, StaffSalaryVO staffSalaryVO )</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择员工类型与新的工资</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工工资信息存储到数据库中</td>
   	</tr>
	<tr >
   	    <td rowspan="3">staff_clock_in</td>
   	    <td>语法</td>
   	    <td> public Response staff_clock_in(Integer id )</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td> 员工点击打卡</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工打卡信息存储到数据库中</td>
   	</tr>
   </table>
  
   

| 需要的服务                                                                     |                 |
|---------------------------------------------------------------------------|-----------------|
| staffDao.addStaff(StaffPO staffPO)                                        | 添加新的员工          |
| staffDao.amendSaleSalary(int id, string newSalary, string newcommission ) | 修改销售人员薪酬        |
| staffDao.amend_Inventory_and_HMN_Salary(int id, string newSalary )        | 修改库存与人力资源人员薪酬   |
| staffDao.amendPresidentSalary(int id, string newSalary )                  | 修改总经理薪酬         |
| staffDao.clock_in(int id, string date)                                    | 在数据库中增加该员工的打卡信息 |

  


数据层主要给业务逻辑层提供数据访问服务, 包括对于持久化数据的增, 删, 改, 查。

![]()
#### 5.4数据层的分解

##### 5.4.1 数据层模块的职责

数据层模块的职责如表所示:

| 模块          | 职责                                                |
|:------------|:--------------------------------------------------|
| staffDao    | 持久化数据库的接口, 提供集体载入、集体保存、增、删、改、查服务                  |
| staffMapper | 基于Mysql数据库的持久化数据库的接口, 提供集体载入、集体保存、<br />增、删、改、查服务 |

##### 5.4.2 数据层模块的接口规范

数据层模块的接口规范如表:
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">addStaff</td>
   	    <td>语法</td>
   	    <td>public void staffDao.addStaff(StaffPO staffPO)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入新员工的信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将员工信息添加进数据库</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">staffDao.amendSaleSalary </td>
   	    <td>语法</td>
   	    <td> public void amendSaleSalary(int id, string newSalary, string newcommission ) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择员工类型与新的工资</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工工资信息存储到数据库中</td>
   	</tr>
    <tr >
   	    <td rowspan="3">staffDao.amend_Inventory_and_HMN_Salary </td>
   	    <td>语法</td>
   	    <td> public void amend_Inventory_and_HMN_Salary(int id, string newSalary )  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择员工类型与新的工资</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工工资信息存储到数据库中</td>
   	</tr>
    <tr >
   	    <td rowspan="3">staffDao.amendPresidentSalary</td>
   	    <td>语法</td>
   	    <td> public void amendPresidentSalary(int id, string newSalary )</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择员工类型与新的工资</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工工资信息存储到数据库中</td>
   	</tr>
	<tr >
   	    <td rowspan="3">staffDao.clock_in  </td>
   	    <td>语法</td>
   	    <td> public Response void clock_in(int id, string date)       )</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td> 员工点击打卡</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工打卡信息存储到数据库中</td>
   	</tr>
   </table>

#### 6.信息视角

##### 6.1 数据持久化对象

系统的PO类就是对应的相关的实体类, 在此只做简单的介绍。

- UserPO类包含用户的id,用户名、 密码以及权限
- StaffPO类包含员工id，姓名、性别、出生日期、手机、工作岗位、基本工资、岗位工资、岗位级别、薪资计算方式、薪资方法方式、工资卡账户薪资发放方式、扣税信息

  持久化对象UserPO的定义如下:
##### 6.2 数据库表

  数据库中包含User表、Commodity表、Customer表、Storage表、StorageLineItem表、staff表、clock_in表。

## erp软件详细设计文档
### 1.引言
### 2.产品概述
### 3.体系结构的概述
### 4.结构视角
#### 4.1业务逻辑的分解
##### 4.1.1 staff模块
（1）模块概述
staff模块承担的需求参加需求规格说明文档功能需求及相关非功能需求。

staff模块的职责与接口参见软件系统结构描述文档表。

（2）staff模块的设计如图所示
![staff模块各个类的设计]()
//todo
各个类的职责如下
（3）模块内部类的接口规范
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">addStaff</td>
   	    <td>语法</td>
   	    <td>public Response addStaff(StaffVO staffVo) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入新员工的信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将员工信息添加进数据库</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">staff_salary_amend</td>
   	    <td>语法</td>
   	    <td> public Response amendStaffSalary(StaffType type,Integer id, StaffSalaryVO staffSalaryVO )</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择员工类型与新的工资</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工工资信息存储到数据库中</td>
   	</tr>
	<tr >
   	    <td rowspan="3">staff_clock_in</td>
   	    <td>语法</td>
   	    <td> public Response staff_clock_in(Integer id )</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td> 员工点击打卡</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工打卡信息存储到数据库中</td>
   	</tr>
   </table>

| 需要的服务                                                                     |                 |
|---------------------------------------------------------------------------|-----------------|
| staffDao.addStaff(StaffPO staffPO)                                        | 添加新的员工          |
| staffDao.amendSaleSalary(int id, string newSalary, string newcommission ) | 修改销售人员薪酬        |
| staffDao.amend_Inventory_and_HMN_Salary(int id, string newSalary )        | 修改库存与人力资源人员薪酬   |
| staffDao.amendPresidentSalary(int id, string newSalary )                  | 修改总经理薪酬         |
| staffDao.clock_in(int id, string date)                                    | 在数据库中增加该员工的打卡信息 |
数据层模块的接口规范如表:
<table>
   	<tr>
   	    <th>提供的服务（接口名）</th>
   	    <th>属性</th>
   	    <th>内容</th>  
   	</tr >
   	<tr >
   	    <td rowspan="3">addStaff</td>
   	    <td>语法</td>
   	    <td>public void staffDao.addStaff(StaffPO staffPO)  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>输入新员工的信息</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将员工信息添加进数据库</td>
   	</tr>
   	<tr >
   	    <td rowspan="3">staffDao.amendSaleSalary </td>
   	    <td>语法</td>
   	    <td> public void amendSaleSalary(int id, string newSalary, string newcommission ) </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择员工类型与新的工资</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工工资信息存储到数据库中</td>
   	</tr>
    <tr >
   	    <td rowspan="3">staffDao.amend_Inventory_and_HMN_Salary </td>
   	    <td>语法</td>
   	    <td> public void amend_Inventory_and_HMN_Salary(int id, string newSalary )  </td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择员工类型与新的工资</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工工资信息存储到数据库中</td>
   	</tr>
    <tr >
   	    <td rowspan="3">staffDao.amendPresidentSalary</td>
   	    <td>语法</td>
   	    <td> public void amendPresidentSalary(int id, string newSalary )</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td>选择员工类型与新的工资</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工工资信息存储到数据库中</td>
   	</tr>
	<tr >
   	    <td rowspan="3">staffDao.clock_in  </td>
   	    <td>语法</td>
   	    <td> public Response void clock_in(int id, string date)       )</td>
   	</tr>
   	<tr>
   	    <td>前置条件</td>
   	    <td> 员工点击打卡</td>
   	</tr>
   	<tr>
   	    <td>后置条件</td>
   	    <td>将该员工打卡信息存储到数据库中</td>
   	</tr>
   </table>
（4）业务逻辑层的动态模型
下图表明了添加新员工时系统的协作顺序。
![添加新员工顺序图]()

（5）业务逻辑层的设计原理
使用了委托式控制风格
### 5.依赖视角
//todo

   






